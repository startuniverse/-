进入管理员admin端，资产管理界面，新增资产，报错：
资产新增失败: ### Error updating database. Cause: java.sql.SQLException: Field 'asset_code' doesn't have a default value ### The error may exist in com/education/platform/mapper/OfficeAssetMapper.java (best guess) ### The error may involve com.education.platform.mapper.OfficeAssetMapper.insert-Inline ### The error occurred while setting parameters ### SQL: INSERT INTO office_asset ( school_id, asset_name, category, specification, quantity, unit_price, total_value, location, status, responsible_person, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) ### Cause: java.sql.SQLException: Field 'asset_code' doesn't have a default value ; Field 'asset_code' doesn't have a default value

新增失败
后端输出：2026-01-10T12:07:41.104+08:00  INFO 23516 --- [nio-8081-exec-2] o.a.c.c.C.[.[localhost].[/api/v1]        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-10T12:07:41.105+08:00  INFO 23516 --- [nio-8081-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2026-01-10T12:07:41.107+08:00  INFO 23516 --- [nio-8081-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2026-01-10T12:07:41.128+08:00 DEBUG 23516 --- [nio-8081-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /backend/system/settings
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7998de89] was not registered for synchronization because synchronization is not active
2026-01-10T12:07:41.213+08:00  INFO 23516 --- [nio-8081-exec-2] com.zaxxer.hikari.HikariDataSource       : EducationPlatformHikariCP - Starting...
2026-01-10T12:07:41.382+08:00  INFO 23516 --- [nio-8081-exec-2] com.zaxxer.hikari.pool.HikariPool        : EducationPlatformHikariCP - Added connection com.mysql.jdbc.JDBC4Connection@1979a471
2026-01-10T12:07:41.385+08:00  INFO 23516 --- [nio-8081-exec-2] com.zaxxer.hikari.HikariDataSource       : EducationPlatformHikariCP - Start completed.
JDBC Connection [HikariProxyConnection@1584395815 wrapping com.mysql.jdbc.JDBC4Connection@1979a471] will not be managed by Spring
==>  Preparing: SELECT * FROM user WHERE username = ? AND status = 1 AND deleted = 0
==> Parameters: admin(String)
<==    Columns: id, username, password, real_name, id_card, phone, email, avatar, gender, birth_date, school_id, department, title, status, last_login_time, last_login_ip, deleted, created_at, updated_at, class_id
<==        Row: 1, admin, $2a$10$0FbH16apzWwgCl5/S6.FBezzcCMOkAuOkkTQk1JKo4vs02jztBsIq, 系统管理员, null, 13800138000, admin@education.com, null, null, null, null, null, null, 1, 2026-01-10 12:06:38.0, null, 0, 2026-01-09 09:59:28.0, 2026-01-09 09:59:28.0, null
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7998de89]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6412dd73] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@182022728 wrapping com.mysql.jdbc.JDBC4Connection@1979a471] will not be managed by Spring
==>  Preparing: SELECT r.role_code FROM role r INNER JOIN user_role ur ON r.id = ur.role_id WHERE ur.user_id = ?
==> Parameters: 1(Long)
<==    Columns: role_code
<==        Row: ADMIN
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6412dd73]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ed2eded] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@2125378516 wrapping com.mysql.jdbc.JDBC4Connection@1979a471] will not be managed by Spring
==>  Preparing: SELECT DISTINCT p.permission_code FROM permission p INNER JOIN role_permission rp ON p.id = rp.permission_id INNER JOIN user_role ur ON rp.role_id = ur.role_id WHERE ur.user_id = ? AND p.status = 1
==> Parameters: 1(Long)
<==      Total: 0
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ed2eded]
2026-01-10T12:07:41.493+08:00 DEBUG 23516 --- [nio-8081-exec-2] c.e.p.security.JwtAuthenticationFilter   : 用户 admin 认证成功
2026-01-10T12:07:41.497+08:00 DEBUG 23516 --- [nio-8081-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /backend/system/settings
2026-01-10T12:07:41.524+08:00 DEBUG 23516 --- [nio-8081-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.education.platform.common.ApiResult com.education.platform.controller.BackendController.getSystemSettings(); target is of class [com.education.platform.controller.BackendController]
2026-01-10T12:07:41.538+08:00 DEBUG 23516 --- [nio-8081-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.education.platform.common.ApiResult com.education.platform.controller.BackendController.getSystemSettings(); target is of class [com.education.platform.controller.BackendController]
2026-01-10T12:07:44.171+08:00 DEBUG 23516 --- [nio-8081-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /auth/login
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d095b6f] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@595435661 wrapping com.mysql.jdbc.JDBC4Connection@1979a471] will not be managed by Spring
==>  Preparing: SELECT * FROM user WHERE username = ? AND status = 1 AND deleted = 0
==> Parameters: admin(String)
<==    Columns: id, username, password, real_name, id_card, phone, email, avatar, gender, birth_date, school_id, department, title, status, last_login_time, last_login_ip, deleted, created_at, updated_at, class_id
<==        Row: 1, admin, $2a$10$0FbH16apzWwgCl5/S6.FBezzcCMOkAuOkkTQk1JKo4vs02jztBsIq, 系统管理员, null, 13800138000, admin@education.com, null, null, null, null, null, null, 1, 2026-01-10 12:06:38.0, null, 0, 2026-01-09 09:59:28.0, 2026-01-09 09:59:28.0, null
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d095b6f]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@764d8d4b] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@389646385 wrapping com.mysql.jdbc.JDBC4Connection@1979a471] will not be managed by Spring
==>  Preparing: SELECT r.role_code FROM role r INNER JOIN user_role ur ON r.id = ur.role_id WHERE ur.user_id = ?
==> Parameters: 1(Long)
<==    Columns: role_code
<==        Row: ADMIN
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@764d8d4b]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@527f623e] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@1212324591 wrapping com.mysql.jdbc.JDBC4Connection@1979a471] will not be managed by Spring
==>  Preparing: SELECT DISTINCT p.permission_code FROM permission p INNER JOIN role_permission rp ON p.id = rp.permission_id INNER JOIN user_role ur ON rp.role_id = ur.role_id WHERE ur.user_id = ? AND p.status = 1
==> Parameters: 1(Long)
<==      Total: 0
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@527f623e]
2026-01-10T12:07:44.211+08:00 DEBUG 23516 --- [nio-8081-exec-3] c.e.p.security.JwtAuthenticationFilter   : 用户 admin 认证成功
2026-01-10T12:07:44.212+08:00 DEBUG 23516 --- [nio-8081-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /auth/login
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f36119f] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@1820988126 wrapping com.mysql.jdbc.JDBC4Connection@1979a471] will not be managed by Spring
==>  Preparing: SELECT * FROM user WHERE username = ? AND status = 1 AND deleted = 0
==> Parameters: admin(String)
<==    Columns: id, username, password, real_name, id_card, phone, email, avatar, gender, birth_date, school_id, department, title, status, last_login_time, last_login_ip, deleted, created_at, updated_at, class_id
<==        Row: 1, admin, $2a$10$0FbH16apzWwgCl5/S6.FBezzcCMOkAuOkkTQk1JKo4vs02jztBsIq, 系统管理员, null, 13800138000, admin@education.com, null, null, null, null, null, null, 1, 2026-01-10 12:06:38.0, null, 0, 2026-01-09 09:59:28.0, 2026-01-09 09:59:28.0, null
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f36119f]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74720e5f] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@696717583 wrapping com.mysql.jdbc.JDBC4Connection@1979a471] will not be managed by Spring
==>  Preparing: UPDATE user SET username=?, password=?, real_name=?, phone=?, email=?, status=?, last_login_time=?, created_at=?, updated_at=? WHERE id=? AND deleted=0
==> Parameters: admin(String), $2a$10$0FbH16apzWwgCl5/S6.FBezzcCMOkAuOkkTQk1JKo4vs02jztBsIq(String), 系统管理员(String), 13800138000(String), admin@education.com(String), 1(Integer), 2026-01-10T12:07:44.433795900(LocalDateTime), 2026-01-09T09:59:28(LocalDateTime), 2026-01-09T09:59:28(LocalDateTime), 1(Long)
<==    Updates: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74720e5f]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a16b85f] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@2071294517 wrapping com.mysql.jdbc.JDBC4Connection@1979a471] will not be managed by Spring
==>  Preparing: SELECT r.role_code FROM role r INNER JOIN user_role ur ON r.id = ur.role_id WHERE ur.user_id = ?
==> Parameters: 1(Long)
<==    Columns: role_code
<==        Row: ADMIN
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a16b85f]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55660042] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@709730033 wrapping com.mysql.jdbc.JDBC4Connection@1979a471] will not be managed by Spring
==>  Preparing: SELECT DISTINCT p.permission_code FROM permission p INNER JOIN role_permission rp ON p.id = rp.permission_id INNER JOIN user_role ur ON rp.role_id = ur.role_id WHERE ur.user_id = ? AND p.status = 1
==> Parameters: 1(Long)
<==      Total: 0
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55660042]
=== 用户 admin 登录，角色: [ADMIN]，权限: []
2026-01-10T12:07:44.499+08:00  INFO 23516 --- [nio-8081-exec-3] c.e.p.service.impl.UserServiceImpl       : 用户 admin 登录成功
2026-01-10T12:07:44.552+08:00 DEBUG 23516 --- [nio-8081-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /backend/system/settings
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5898d5d1] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@726110418 wrapping com.mysql.jdbc.JDBC4Connection@1979a471] will not be managed by Spring
==>  Preparing: SELECT * FROM user WHERE username = ? AND status = 1 AND deleted = 0
==> Parameters: admin(String)
<==    Columns: id, username, password, real_name, id_card, phone, email, avatar, gender, birth_date, school_id, department, title, status, last_login_time, last_login_ip, deleted, created_at, updated_at, class_id
<==        Row: 1, admin, $2a$10$0FbH16apzWwgCl5/S6.FBezzcCMOkAuOkkTQk1JKo4vs02jztBsIq, 系统管理员, null, 13800138000, admin@education.com, null, null, null, null, null, null, 1, 2026-01-10 12:07:44.0, null, 0, 2026-01-09 09:59:28.0, 2026-01-09 09:59:28.0, null
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5898d5d1]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61c2b42c] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@1580624386 wrapping com.mysql.jdbc.JDBC4Connection@1979a471] will not be managed by Spring
==>  Preparing: SELECT r.role_code FROM role r INNER JOIN user_role ur ON r.id = ur.role_id WHERE ur.user_id = ?
==> Parameters: 1(Long)
<==    Columns: role_code
<==        Row: ADMIN
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61c2b42c]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d278915] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@154149193 wrapping com.mysql.jdbc.JDBC4Connection@1979a471] will not be managed by Spring
==>  Preparing: SELECT DISTINCT p.permission_code FROM permission p INNER JOIN role_permission rp ON p.id = rp.permission_id INNER JOIN user_role ur ON rp.role_id = ur.role_id WHERE ur.user_id = ? AND p.status = 1
==> Parameters: 1(Long)
<==      Total: 0
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d278915]
2026-01-10T12:07:44.570+08:00 DEBUG 23516 --- [nio-8081-exec-1] c.e.p.security.JwtAuthenticationFilter   : 用户 admin 认证成功
2026-01-10T12:07:44.570+08:00 DEBUG 23516 --- [nio-8081-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /backend/system/settings
2026-01-10T12:07:44.571+08:00 DEBUG 23516 --- [nio-8081-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.education.platform.common.ApiResult com.education.platform.controller.BackendController.getSystemSettings(); target is of class [com.education.platform.controller.BackendController]
2026-01-10T12:07:44.572+08:00 DEBUG 23516 --- [nio-8081-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.education.platform.common.ApiResult com.education.platform.controller.BackendController.getSystemSettings(); target is of class [com.education.platform.controller.BackendController]
2026-01-10T12:07:45.875+08:00 DEBUG 23516 --- [nio-8081-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /backend/asset/list?schoolId=1&current=1&size=10
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ef2a779] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@333311903 wrapping com.mysql.jdbc.JDBC4Connection@1979a471] will not be managed by Spring
==>  Preparing: SELECT * FROM user WHERE username = ? AND status = 1 AND deleted = 0
==> Parameters: admin(String)
<==    Columns: id, username, password, real_name, id_card, phone, email, avatar, gender, birth_date, school_id, department, title, status, last_login_time, last_login_ip, deleted, created_at, updated_at, class_id
<==        Row: 1, admin, $2a$10$0FbH16apzWwgCl5/S6.FBezzcCMOkAuOkkTQk1JKo4vs02jztBsIq, 系统管理员, null, 13800138000, admin@education.com, null, null, null, null, null, null, 1, 2026-01-10 12:07:44.0, null, 0, 2026-01-09 09:59:28.0, 2026-01-09 09:59:28.0, null
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ef2a779]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47104817] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@1579772931 wrapping com.mysql.jdbc.JDBC4Connection@1979a471] will not be managed by Spring
==>  Preparing: SELECT r.role_code FROM role r INNER JOIN user_role ur ON r.id = ur.role_id WHERE ur.user_id = ?
==> Parameters: 1(Long)
<==    Columns: role_code
<==        Row: ADMIN
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47104817]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e63182e] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@1464803955 wrapping com.mysql.jdbc.JDBC4Connection@1979a471] will not be managed by Spring
==>  Preparing: SELECT DISTINCT p.permission_code FROM permission p INNER JOIN role_permission rp ON p.id = rp.permission_id INNER JOIN user_role ur ON rp.role_id = ur.role_id WHERE ur.user_id = ? AND p.status = 1
==> Parameters: 1(Long)
<==      Total: 0
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e63182e]
2026-01-10T12:07:45.904+08:00 DEBUG 23516 --- [nio-8081-exec-5] c.e.p.security.JwtAuthenticationFilter   : 用户 admin 认证成功
2026-01-10T12:07:45.905+08:00 DEBUG 23516 --- [nio-8081-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /backend/asset/list?schoolId=1&current=1&size=10
2026-01-10T12:07:45.913+08:00 DEBUG 23516 --- [nio-8081-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.education.platform.common.ApiResult com.education.platform.controller.BackendController.listAssets(java.lang.Long,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long); target is of class [com.education.platform.controller.BackendController]
2026-01-10T12:07:45.914+08:00 DEBUG 23516 --- [nio-8081-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.education.platform.common.ApiResult com.education.platform.controller.BackendController.listAssets(java.lang.Long,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long); target is of class [com.education.platform.controller.BackendController]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52505652] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@1891046724 wrapping com.mysql.jdbc.JDBC4Connection@1979a471] will not be managed by Spring
==>  Preparing: SELECT COUNT(*) AS total FROM office_asset WHERE deleted = 0 AND (school_id = ?)
==> Parameters: 1(Long)
<==    Columns: total
<==        Row: 0
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52505652]
2026-01-10T12:08:01.646+08:00 DEBUG 23516 --- [nio-8081-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /backend/asset/add
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ac968cc] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@1798614422 wrapping com.mysql.jdbc.JDBC4Connection@1979a471] will not be managed by Spring
==>  Preparing: SELECT * FROM user WHERE username = ? AND status = 1 AND deleted = 0
==> Parameters: admin(String)
<==    Columns: id, username, password, real_name, id_card, phone, email, avatar, gender, birth_date, school_id, department, title, status, last_login_time, last_login_ip, deleted, created_at, updated_at, class_id
<==        Row: 1, admin, $2a$10$0FbH16apzWwgCl5/S6.FBezzcCMOkAuOkkTQk1JKo4vs02jztBsIq, 系统管理员, null, 13800138000, admin@education.com, null, null, null, null, null, null, 1, 2026-01-10 12:07:44.0, null, 0, 2026-01-09 09:59:28.0, 2026-01-09 09:59:28.0, null
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ac968cc]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f5a05a5] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@346710596 wrapping com.mysql.jdbc.JDBC4Connection@1979a471] will not be managed by Spring
==>  Preparing: SELECT r.role_code FROM role r INNER JOIN user_role ur ON r.id = ur.role_id WHERE ur.user_id = ?
==> Parameters: 1(Long)
<==    Columns: role_code
<==        Row: ADMIN
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f5a05a5]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@596a1f98] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@1713524285 wrapping com.mysql.jdbc.JDBC4Connection@1979a471] will not be managed by Spring
==>  Preparing: SELECT DISTINCT p.permission_code FROM permission p INNER JOIN role_permission rp ON p.id = rp.permission_id INNER JOIN user_role ur ON rp.role_id = ur.role_id WHERE ur.user_id = ? AND p.status = 1
==> Parameters: 1(Long)
<==      Total: 0
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@596a1f98]
2026-01-10T12:08:01.675+08:00 DEBUG 23516 --- [nio-8081-exec-6] c.e.p.security.JwtAuthenticationFilter   : 用户 admin 认证成功
2026-01-10T12:08:01.676+08:00 DEBUG 23516 --- [nio-8081-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /backend/asset/add
2026-01-10T12:08:01.683+08:00 DEBUG 23516 --- [nio-8081-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.education.platform.common.ApiResult com.education.platform.controller.BackendController.addAsset(java.util.Map); target is of class [com.education.platform.controller.BackendController]
2026-01-10T12:08:01.685+08:00 DEBUG 23516 --- [nio-8081-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.education.platform.common.ApiResult com.education.platform.controller.BackendController.addAsset(java.util.Map); target is of class [com.education.platform.controller.BackendController]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32eac771] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@299068245 wrapping com.mysql.jdbc.JDBC4Connection@1979a471] will not be managed by Spring
==>  Preparing: INSERT INTO office_asset ( school_id, asset_name, category, specification, quantity, unit_price, total_value, location, status, responsible_person, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
==> Parameters: 1(Long), 测试001(String), equipment(String), 001(String), 1(Integer), 1(BigDecimal), 1(BigDecimal), 信息学院(String), 1(Integer), 崔宇杭(String), 2026-01-10T12:08:01.695626900(LocalDateTime), 2026-01-10T12:08:01.696629900(LocalDateTime)
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32eac771]
资产新增失败:
### Error updating database.  Cause: java.sql.SQLException: Field 'asset_code' doesn't have a default value
### The error may exist in com/education/platform/mapper/OfficeAssetMapper.java (best guess)
### The error may involve com.education.platform.mapper.OfficeAssetMapper.insert-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO office_asset  ( school_id, asset_name, category, specification, quantity, unit_price, total_value,  location, status, responsible_person,  created_at, updated_at )  VALUES (  ?, ?, ?, ?, ?, ?, ?,  ?, ?, ?,  ?, ?  )
### Cause: java.sql.SQLException: Field 'asset_code' doesn't have a default value
; Field 'asset_code' doesn't have a default value
org.springframework.dao.DataIntegrityViolationException:
### Error updating database.  Cause: java.sql.SQLException: Field 'asset_code' doesn't have a default value
### The error may exist in com/education/platform/mapper/OfficeAssetMapper.java (best guess)
### The error may involve com.education.platform.mapper.OfficeAssetMapper.insert-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO office_asset  ( school_id, asset_name, category, specification, quantity, unit_price, total_value,  location, status, responsible_person,  created_at, updated_at )  VALUES (  ?, ?, ?, ?, ?, ?, ?,  ?, ?, ?,  ?, ?  )
### Cause: java.sql.SQLException: Field 'asset_code' doesn't have a default value
; Field 'asset_code' doesn't have a default value
        at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:258)
        at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:73)
        at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:92)
        at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:439)
        at jdk.proxy2/jdk.proxy2.$Proxy92.insert(Unknown Source)
        at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
        at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:59)
        at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:152)
        at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
        at jdk.proxy2/jdk.proxy2.$Proxy108.insert(Unknown Source)
        at com.education.platform.controller.BackendController.addAsset(BackendController.java:643)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.base/java.lang.reflect.Method.invoke(Method.java:568)
        at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:751)
        at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:198)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:751)
        at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)
        at com.education.platform.controller.BackendController$$SpringCGLIB$$0.addAsset(<generated>)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.base/java.lang.reflect.Method.invoke(Method.java:568)
        at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
        at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
        at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:892)
        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:798)
        at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
        at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081)
        at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974)
        at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
        at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
        at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
        at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
        at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
        at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
        at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
        at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
        at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
        at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
        at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
        at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
        at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
        at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
        at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
        at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
        at com.education.platform.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:69)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
        at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
        at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
        at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
        at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
        at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
        at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
        at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
        at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
        at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
        at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
        at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
        at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
        at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
        at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
        at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
        at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
        at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
        at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
        at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
        at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:389)
        at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
        at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
        at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
        at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
        at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.sql.SQLException: Field 'asset_code' doesn't have a default value
        at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:965)
        at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3933)
        at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3869)
        at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2524)
        at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2675)
        at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2465)
        at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:1915)
        at com.mysql.jdbc.PreparedStatement.execute(PreparedStatement.java:1254)
        at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
        at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
        at jdk.internal.reflect.GeneratedMethodAccessor17.invoke(Unknown Source)
        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.base/java.lang.reflect.Method.invoke(Method.java:568)
        at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:58)
        at jdk.proxy3/jdk.proxy3.$Proxy150.execute(Unknown Source)
        at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:48)
        at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:75)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.base/java.lang.reflect.Method.invoke(Method.java:568)
        at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:61)
        at jdk.proxy2/jdk.proxy2.$Proxy148.update(Unknown Source)
        at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
        at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
        at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.base/java.lang.reflect.Method.invoke(Method.java:568)
        at org.apache.ibatis.plugin.Invocation.proceed(Invocation.java:49)
        at com.baomidou.mybatisplus.extension.plugins.MybatisPlusInterceptor.intercept(MybatisPlusInterceptor.java:106)
        at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:59)
        at jdk.proxy2/jdk.proxy2.$Proxy147.update(Unknown Source)
        at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
        at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.base/java.lang.reflect.Method.invoke(Method.java:568)
        at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425)
        ... 123 more
控制台输出：index.js:269 === 路由守卫调试 ===
index.js:270 目标路径: /admin/dashboard
index.js:271 用户角色: Array(1)
index.js:272 要求角色: Array(1)
index.js:276 是否有权限: true
Login.vue:594 登录响应: Object
Login.vue:595 用户角色: Proxy(Array)
Login.vue:596 hasRole(TEACHER): false
index.js:269 === 路由守卫调试 ===
index.js:270 目标路径: /admin/dashboard
index.js:271 用户角色: Array(1)
index.js:272 要求角色: Array(1)
index.js:276 是否有权限: true
index.js:269 === 路由守卫调试 ===
index.js:270 目标路径: /admin/assets
index.js:271 用户角色: Array(1)
index.js:272 要求角色: Array(1)
index.js:276 是否有权限: true
修改代码