# "ç³»ç»Ÿé”™è¯¯" è¯Šæ–­æŒ‡å—

## ğŸ” é—®é¢˜åˆ†æ

**é”™è¯¯ç°è±¡**ï¼šå‰ç«¯æ˜¾ç¤º"ç³»ç»Ÿé”™è¯¯"
**å¯èƒ½åŸå› **ï¼š
1. æ•°æ®åº“ä¸­æ²¡æœ‰ admin ç”¨æˆ·
2. å¯†ç ä¸åŒ¹é…ï¼ˆadmin123 çš„åŠ å¯†å€¼ä¸æ­£ç¡®ï¼‰
3. æ•°æ®åº“è¿æ¥å¤±è´¥
4. åç«¯ä»£ç å¼‚å¸¸

## ğŸ¯ å¿«é€Ÿè¯Šæ–­æ­¥éª¤

### æ­¥éª¤ 1ï¼šè¿è¡Œæµ‹è¯•è„šæœ¬

åŒå‡»è¿è¡Œï¼š
```
E:\shixun\backend\test_login.bat
```

è¿™ä¼šæµ‹è¯•ï¼š
- åç«¯æ¥å£æ˜¯å¦å¯è¾¾
- è¿”å›ä»€ä¹ˆé”™è¯¯ä¿¡æ¯

### æ­¥éª¤ 2ï¼šæ£€æŸ¥æ•°æ®åº“æ•°æ®

åœ¨ MySQL ä¸­æ‰§è¡Œï¼š
```sql
USE education_platform;

-- æŸ¥çœ‹ admin ç”¨æˆ·
SELECT id, username, real_name, status, password FROM user WHERE username = 'admin';

-- æŸ¥çœ‹æ‰€æœ‰ç”¨æˆ·
SELECT id, username, status FROM user;
```

### æ­¥éª¤ 3ï¼šæ‰‹åŠ¨æµ‹è¯•ç™»å½•æ¥å£

åœ¨æµè§ˆå™¨ä¸­è®¿é—®ï¼š
```
http://localhost:8081/swagger-ui.html
```

æ‰¾åˆ° `/auth/login` æ¥å£ï¼Œç‚¹å‡»"Try it out"ï¼Œè¾“å…¥ï¼š
```json
{
  "username": "admin",
  "password": "admin123"
}
```

æŸ¥çœ‹è¿”å›çš„å…·ä½“é”™è¯¯ä¿¡æ¯ã€‚

## ğŸ”§ å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

### é—®é¢˜ Aï¼šæ•°æ®åº“ä¸­æ²¡æœ‰ admin ç”¨æˆ·

**ç—‡çŠ¶**ï¼š`SELECT * FROM user WHERE username = 'admin';` è¿”å›ç©º

**è§£å†³**ï¼š
```bash
mysql -u root -p education_platform < E:\shixun\backend\database\create_admin.sql
```

### é—®é¢˜ Bï¼šå¯†ç é”™è¯¯

**ç—‡çŠ¶**ï¼šç”¨æˆ·å­˜åœ¨ä½†å¯†ç ä¸åŒ¹é…

**åŸå› **ï¼šå¯†ç åŠ å¯†å€¼ä¸æ­£ç¡®

**è§£å†³**ï¼šé‡æ–°æ‰§è¡Œ SQL è„šæœ¬ï¼Œç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„ BCrypt åŠ å¯†å¯†ç 

### é—®é¢˜ Cï¼šç”¨æˆ·çŠ¶æ€ä¸å¯¹

**ç—‡çŠ¶**ï¼š`status` å­—æ®µä¸æ˜¯ 1

**è§£å†³**ï¼š
```sql
UPDATE user SET status = 1 WHERE username = 'admin';
```

### é—®é¢˜ Dï¼šç¼ºå°‘è§’è‰²æƒé™

**ç—‡çŠ¶**ï¼šç”¨æˆ·å­˜åœ¨ä½†æ²¡æœ‰ ADMIN è§’è‰²

**è§£å†³**ï¼š
```sql
-- æ£€æŸ¥è§’è‰²
SELECT * FROM user_role WHERE user_id = (SELECT id FROM user WHERE username = 'admin');

-- é‡æ–°åˆ†é…è§’è‰²
INSERT INTO user_role (user_id, role_id)
SELECT u.id, r.id
FROM user u, role r
WHERE u.username = 'admin' AND r.role_code = 'ADMIN';
```

## ğŸ“Š é¢„æœŸçš„æ­£ç¡®æ•°æ®

### user è¡¨
```
id | username | real_name | status | deleted
1  | admin    | ç³»ç»Ÿç®¡ç†å‘˜ | 1      | 0
```

### password å­—æ®µï¼ˆBCrypt åŠ å¯†ï¼‰
```
$2a$10$N.zmdr9k7uOCQb376NoUnuTJ8iAt6Z5EHsM8lE9lBa3BjR0v9bHri
```

### role è¡¨
```
id | role_code | role_name
1  | ADMIN     | ç³»ç»Ÿç®¡ç†å‘˜
```

### user_role è¡¨
```
user_id | role_id
1       | 1
```

## ğŸš€ ç«‹å³ä¿®å¤æ–¹æ¡ˆ

å¦‚æœä¸æƒ³é€ä¸ªæ£€æŸ¥ï¼Œç›´æ¥æ‰§è¡Œè¿™ä¸ªå®Œæ•´çš„ SQLï¼š

```sql
USE education_platform;

-- 1. åˆ é™¤æ—§æ•°æ®ï¼ˆå¦‚æœæœ‰ï¼‰
DELETE FROM user_role WHERE user_id = (SELECT id FROM user WHERE username = 'admin');
DELETE FROM user WHERE username = 'admin';

-- 2. æ’å…¥æ­£ç¡®çš„ admin ç”¨æˆ·
INSERT INTO user (
    id, username, password, real_name, phone, email, status, deleted
) VALUES (
    1, 'admin', '$2a$10$N.zmdr9k7uOCQb376NoUnuTJ8iAt6Z5EHsM8lE9lBa3BjR0v9bHri',
    'ç³»ç»Ÿç®¡ç†å‘˜', '13800138000', 'admin@education.com', 1, 0
);

-- 3. ç¡®ä¿ ADMIN è§’è‰²å­˜åœ¨
INSERT IGNORE INTO role (id, role_code, role_name, description, status, deleted)
VALUES (1, 'ADMIN', 'ç³»ç»Ÿç®¡ç†å‘˜', 'ç³»ç»Ÿæœ€é«˜æƒé™', 1, 0);

-- 4. åˆ†é…è§’è‰²
INSERT INTO user_role (user_id, role_id) VALUES (1, 1);

-- 5. éªŒè¯
SELECT
    u.id, u.username, u.real_name, u.status,
    GROUP_CONCAT(r.role_name) as roles
FROM user u
LEFT JOIN user_role ur ON u.id = ur.user_id
LEFT JOIN role r ON ur.role_id = r.id
WHERE u.username = 'admin'
GROUP BY u.id;
```

## ğŸ“ å¦‚æœä»ç„¶å¤±è´¥

è¯·æä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š

1. **è¿è¡Œæµ‹è¯•è„šæœ¬çš„è¾“å‡º**
   ```bash
   E:\shixun\backend\test_login.bat
   ```

2. **æ•°æ®åº“æŸ¥è¯¢ç»“æœ**
   ```sql
   SELECT * FROM user WHERE username = 'admin';
   ```

3. **æµè§ˆå™¨å¼€å‘è€…å·¥å…·æˆªå›¾**
   - F12 â†’ Network æ ‡ç­¾
   - æ‰¾åˆ°ç™»å½•è¯·æ±‚ï¼ŒæŸ¥çœ‹"Response"æ ‡ç­¾

4. **åç«¯æ§åˆ¶å°æ—¥å¿—**
   - æŸ¥çœ‹æ˜¯å¦æœ‰å¼‚å¸¸å †æ ˆä¿¡æ¯

è¿™æ ·æˆ‘å°±èƒ½å‡†ç¡®å®šä½é—®é¢˜æ‰€åœ¨ï¼
