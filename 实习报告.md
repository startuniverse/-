# 专 业 实 习 报 告

## 封面信息

**项    目**：某市教育局综合信息服务平台
**学    院**：计算机与信息学院
**学    号**：2021XXXXXX
**专    业**：计算机科学与技术
**指导教师**：XXX老师
**学生姓名**：XXX
**完成日期**：2025年1月

---

## 目    录

**第一章 前言**
1.1. 项目背景
1.2. 系统概述
1.2.1. 项目目标
1.2.2. 模块划分
1.2.3. 项目预期成果
1.3. 开发计划

**第二章 负责模块概述**
2.1. 功能介绍
2.1.1. 功能概述
2.1.2. 公文流转需求分析
2.1.3. 学籍管理需求分析
2.1.4. 业务流程
2.2. 需求分析
2.2.1. 公文流转业务流程
2.2.2. 学籍管理业务流程

**第三章 负责模块详细设计**
3.1. 模块设计
3.2. 功能设计
3.2.1. 公文流转功能设计
3.2.2. 学籍管理功能设计
3.2.3. 数据库设计
3.2.4. 系统流程设计

**第四章 负责模块代码实现**
4.1. 项目结构
4.2. 关键代码及说明
4.2.1. 公文流转后端实现
4.2.2. 公文流转前端实现
4.2.3. 学籍管理后端实现
4.2.4. 学籍管理前端实现

**第五章 负责模块测试与功能展示**
5.1. 测试
5.2. 功能展示

**第六章 实训总结**

---

## 第一章 前言

### 1.1. 项目背景

随着"互联网+教育"的快速发展，教育信息化已成为推动教育现代化的重要手段。传统的教育管理模式存在效率低下、信息孤岛、数据分散等问题，无法满足现代教育管理的需求。某市教育局为提升全市中小学教育管理水平，实现教育数据的集中管理和智能分析，决定建设一套综合信息服务平台。

本项目"某市教育局综合信息服务平台"旨在构建一个集办公管理、学籍管理、教学资源管理、大数据分析于一体的智慧教育平台。通过该平台，可以实现全市教育信息的统一管理，为教育行政部门、学校、教师、学生和家长提供便捷高效的服务。

### 1.2. 系统概述

#### 1.2.1. 项目目标

本项目的主要目标是建设一个功能完善、性能稳定、安全可靠的教育信息管理平台，具体包括：

1. **实现办公自动化**：通过公文流转模块，实现公文的在线起草、审批、传阅和归档，提高办公效率。
2. **实现学籍管理信息化**：通过学籍管理模块，实现学生信息的集中管理、学籍变动的在线处理和统计分析。
3. **实现教学资源共享**：建立统一的教学资源库，支持教师上传、分享教学资源，学生在线学习。
4. **实现数据智能分析**：通过大数据分析，为教育决策提供数据支持。

#### 1.2.2. 模块划分

系统主要包含以下功能模块：
- 智慧门户（校园门户站群平台、家校互通APP）
- 智慧管理（办公管理、学籍管理、教师管理、教务管理等）
- 智慧教学（教学资源库、云课堂平台、走班选课系统）
- 大数据分析平台
- 民办教育管理平台

#### 1.2.3. 项目预期成果

1. 完成系统核心功能的开发和测试
2. 实现公文流转的在线化、无纸化
3. 实现学籍信息的统一管理和实时查询
4. 系统稳定运行，响应时间在可接受范围内
5. 用户界面友好，操作便捷

### 1.3. 开发计划

| 阶段 | 时间 | 主要任务 | 负责人 |
|------|------|----------|--------|
| 需求分析 | 第1周 | 需求调研、功能分析 | 全体成员 |
| 系统设计 | 第2周 | 数据库设计、接口设计 | 架构师 |
| 环境搭建 | 第3周 | 开发环境配置、框架搭建 | 全体成员 |
| 编码实现 | 第4-7周 | 核心功能开发 | 开发人员 |
| 测试优化 | 第8周 | 功能测试、性能优化 | 测试人员 |
| 部署上线 | 第9周 | 系统部署、用户培训 | 运维人员 |

---

## 第二章 负责模块概述

### 2.1. 功能介绍

#### 2.1.1. 功能概述

本人在项目中主要负责两个核心模块的开发：
1. **4.1.1 公文流转**（办公管理模块）
2. **4.2.1 学籍管理**（学生成长分析平台）

这两个模块是整个教育信息管理系统的重要组成部分，涵盖了教育行政部门的日常办公和学生信息管理的核心业务。

#### 2.1.2. 公文流转需求分析

公文流转模块主要服务于教育局内部的办公自动化，需求包括：

1. **公文起草**：支持多种格式的公文在线编辑和创建
2. **公文审批**：支持多级审批流程，可自定义审批路径
3. **公文传阅**：支持公文的内部传阅和查阅
4. **公文归档**：审批完成的公文自动归档，支持检索
5. **流程监控**：实时查看公文处理状态和流转进度
6. **消息通知**：公文状态变更时的实时消息提醒

#### 2.1.3. 学籍管理需求分析

学籍管理模块面向全市中小学的学生信息管理，需求包括：

1. **学生信息管理**：学生基本信息的增删改查
2. **学籍注册**：新生入学的学籍注册和信息录入
3. **学籍变动**：转学、休学、复学、退学等业务处理
4. **信息查询**：支持多维度的学生信息查询和统计
5. **数据导出**：支持学籍数据的Excel导出
6. **权限控制**：不同角色（管理员、教师、学生）的权限管理

#### 2.1.4. 业务流程

**公文流转流程**：
```
公文起草 → 部门审核 → 分管领导审批 → 局长审批 → 公文归档
```

**学籍管理流程**：
```
学生注册 → 信息审核 → 学籍建立 → 日常管理 → 毕业/转学处理
```

### 2.2. 需求分析

#### 2.2.1. 公文流转业务流程

1. **发起阶段**：起草人创建公文，填写标题、内容、附件等信息
2. **审核阶段**：部门负责人对公文内容进行审核，可退回修改
3. **审批阶段**：分管领导和局长进行审批，支持会签和加签
4. **办理阶段**：相关部门根据公文要求进行办理
5. **归档阶段**：公文办理完成后自动归档，支持后续检索

关键业务规则：
- 审批流程可灵活配置
- 支持紧急公文的优先处理
- 公文流转全程留痕，可追溯
- 支持公文模板管理

#### 2.2.2. 学籍管理业务流程

1. **新生注册**：批量导入或单个录入新生信息
2. **信息核对**：学校管理员核对学生信息的准确性
3. **学籍建立**：系统自动生成学籍号，建立学籍档案
4. **日常管理**：支持信息修改、照片上传、证明打印等
5. **学籍变动**：在线办理转学、休学等业务
6. **毕业处理**：毕业生学籍的归档和统计

关键业务规则：
- 学籍号按国家标准自动生成
- 支持批量导入和导出
- 变动操作需审核确认
- 历史记录完整保存

---

## 第三章 负责模块详细设计

### 3.1. 模块设计

#### 3.1.1. 公文流转模块设计

采用前后端分离架构：
- **前端**：Vue3 + Element Plus
- **后端**：Spring Boot 3 + MyBatis Plus
- **数据库**：MySQL 8.0

模块分层设计：
```
Controller层（接口层）
    ↓
Service层（业务逻辑层）
    ↓
Mapper层（数据访问层）
    ↓
数据库
```

#### 3.1.2. 学籍管理模块设计

同样采用前后端分离架构，模块分层：
```
Controller层（接口层）
    ↓
Service层（业务逻辑层）
    ↓
Mapper层（数据访问层）
    ↓
数据库
```

### 3.2. 功能设计

#### 3.2.1. 公文流转功能设计

**核心功能点**：

1. **公文起草**
   - 富文本编辑器支持
   - 附件上传（支持多文件）
   - 选择审批流程模板
   - 设置紧急程度

2. **待办公文**
   - 显示当前用户待审批的公文
   - 支持按状态、时间、紧急程度筛选
   - 查看公文详情和流转历史

3. **公文审批**
   - 审批意见填写
   - 支持通过、退回、转办
   - 可添加附件和批注

4. **已办公文**
   - 显示用户已处理的公文
   - 查看处理结果和后续流程

5. **公文归档**
   - 自动归档已完成的公文
   - 支持全文检索
   - 导出归档目录

#### 3.2.2. 学籍管理功能设计

**核心功能点**：

1. **学生信息管理**
   - 学生基本信息录入（姓名、性别、身份证号等）
   - 支持批量导入（Excel）
   - 信息修改和删除
   - 学籍照片上传

2. **学籍注册**
   - 新生信息批量导入
   - 自动学籍号生成
   - 信息校验和审核
   - 注册成功通知

3. **学籍变动**
   - 转学申请和审批
   - 休学/复学申请
   - 退学处理
   - 变动记录查询

4. **信息查询统计**
   - 按学校、年级、班级查询
   - 学籍状态统计
   - 变动情况统计
   - 数据导出Excel

5. **权限管理**
   - 管理员：全量数据操作
   - 教师：本班级学生信息
   - 学生：个人信息查看

#### 3.2.3. 数据库设计

**公文流转相关表**：

1. **document（公文主表）**
```sql
document_id          BIGINT       主键
title                VARCHAR(200) 标题
content              TEXT         内容
draft_user_id        BIGINT       起草人ID
draft_dept_id        BIGINT       起草部门ID
priority             INT          优先级（1-普通，2-紧急，3-特急）
status               INT          状态（0-草稿，1-审批中，2-已归档，3-已退回）
current_step         INT          当前步骤
create_time          DATETIME     创建时间
update_time          DATETIME     更新时间
```

2. **document_attachment（公文附件表）**
```sql
attachment_id        BIGINT       主键
document_id          BIGINT       公文ID
file_name            VARCHAR(200) 文件名
file_path            VARCHAR(500) 存储路径
file_size            BIGINT       文件大小
upload_time          DATETIME     上传时间
```

3. **document_approval（公文审批表）**
```sql
approval_id          BIGINT       主键
document_id          BIGINT       公文ID
approver_id          BIGINT       审批人ID
step                 INT          审批步骤
opinion              TEXT         审批意见
status               INT          状态（0-待审批，1-通过，2-退回）
approval_time        DATETIME     审批时间
```

**学籍管理相关表**：

1. **student（学生信息表）**
```sql
student_id           BIGINT       主键
student_number       VARCHAR(50)  学籍号（唯一）
name                 VARCHAR(50)  姓名
gender               INT          性别（0-女，1-男）
id_card              VARCHAR(20)  身份证号
birthday             DATE         出生日期
school_id            BIGINT       学校ID
grade                VARCHAR(20)  年级
class                VARCHAR(20)  班级
phone                VARCHAR(20)  联系电话
address              VARCHAR(200) 家庭住址
status               INT          学籍状态（1-在读，2-休学，3-转学，4-毕业，5-退学）
admission_date       DATE         入学日期
photo                VARCHAR(500) 照片路径
create_time          DATETIME     创建时间
update_time          DATETIME     更新时间
```

2. **student_change（学籍变动表）**
```sql
change_id            BIGINT       主键
student_id           BIGINT       学生ID
change_type          INT          变动类型（1-转学，2-休学，3-复学，4-退学）
reason               TEXT         变动原因
from_school          VARCHAR(100) 原学校（转学用）
to_school            VARCHAR(100) 目标学校（转学用）
start_date           DATE         开始日期
end_date             DATE         结束日期（休学用）
status               INT          状态（0-待审核，1-已通过，2-已拒绝）
approve_user_id      BIGINT       审核人ID
approve_time         DATETIME     审核时间
create_time          DATETIME     创建时间
```

3. **student_history（学籍历史表）**
```sql
history_id           BIGINT       主键
student_id           BIGINT       学生ID
operation_type       VARCHAR(50)  操作类型
operation_content    TEXT         操作内容
operator_id          BIGINT       操作人ID
operation_time       DATETIME     操作时间
```

#### 3.2.4. 系统流程设计

**公文审批流程**：
```
1. 起草人创建公文 → 保存为草稿
2. 提交审批 → 进入部门审核环节
3. 部门审核 → 通过则进入分管领导审批，退回则返回起草人
4. 分管领导审批 → 通过则进入局长审批，退回则返回起草人
5. 局长审批 → 通过则归档，退回则返回起草人
6. 归档完成 → 流程结束
```

**学籍注册流程**：
```
1. 管理员导入新生信息
2. 系统校验数据完整性
3. 自动生成学籍号
4. 学校管理员审核
5. 审核通过 → 建立学籍档案
6. 发送注册成功通知
```

---

## 第四章 负责模块代码实现

### 4.1. 项目结构

#### 4.1.1. 前端项目目录结构
```
src/
├── api/                    # API接口封装
│   ├── document.js         # 公文相关接口
│   └── student.js          # 学籍相关接口
├── assets/                 # 静态资源
├── components/             # 公共组件
│   ├── Editor/             # 富文本编辑器
│   └── Upload/             # 文件上传组件
├── router/                 # 路由配置
│   └── index.js
├── store/                  # Vuex状态管理
│   ├── modules/
│   │   ├── document.js
│   │   └── student.js
├── views/                  # 页面组件
│   ├── Document/
│   │   ├── Draft.vue       # 公文起草
│   │   ├── Approval.vue    # 公文审批
│   │   └── Archive.vue     # 公文归档
│   └── Student/
│       ├── InfoManage.vue  # 学生信息管理
│       ├── Register.vue    # 学籍注册
│       ├── Change.vue      # 学籍变动
│       └── Query.vue       # 信息查询
├── App.vue
└── main.js
```

#### 4.1.2. 后端项目目录结构
```
src/main/java/com/edu/platform/
├── config/                 # 配置类
├── controller/             # 控制器层
│   ├── DocumentController.java
│   └── StudentController.java
├── entity/                 # 实体类
│   ├── Document.java
│   ├── Student.java
│   └── StudentChange.java
├── mapper/                 # 数据访问层
│   ├── DocumentMapper.java
│   └── StudentMapper.java
├── service/                # 业务逻辑层
│   ├── impl/
│   │   ├── DocumentServiceImpl.java
│   │   └── StudentServiceImpl.java
│   └── DocumentService.java
│   └── StudentService.java
└── utils/                  # 工具类
    └── FileUtil.java
```

### 4.2. 关键代码及说明

#### 4.2.1. 公文流转后端实现

**DocumentController.java**
```java
@RestController
@RequestMapping("/api/document")
public class DocumentController {

    @Autowired
    private DocumentService documentService;

    /**
     * 创建公文
     */
    @PostMapping("/create")
    public Result<Document> create(@RequestBody Document document) {
        document.setDraftUserId(getCurrentUserId());
        document.setStatus(0); // 草稿状态
        document.setCreateTime(new Date());
        documentService.save(document);
        return Result.success(document);
    }

    /**
     * 提交审批
     */
    @PostMapping("/submit/{documentId}")
    public Result<Void> submit(@PathVariable Long documentId) {
        Document doc = documentService.getById(documentId);
        if (doc == null) {
            return Result.error("公文不存在");
        }
        doc.setStatus(1); // 审批中
        doc.setUpdateTime(new Date());
        documentService.updateById(doc);

        // 创建审批记录
        documentService.createApproval(documentId, getCurrentUserId());
        return Result.success();
    }

    /**
     * 审批公文
     */
    @PostMapping("/approve")
    public Result<Void> approve(@RequestBody ApprovalDTO dto) {
        DocumentApproval approval = new DocumentApproval();
        approval.setDocumentId(dto.getDocumentId());
        approval.setApproverId(getCurrentUserId());
        approval.setOpinion(dto.getOpinion());
        approval.setStatus(dto.getStatus());
        approval.setApprovalTime(new Date());

        documentService.approve(approval);
        return Result.success();
    }

    /**
     * 获取待审批公文列表
     */
    @GetMapping("/pending")
    public Result<List<Document>> getPending() {
        Long userId = getCurrentUserId();
        List<Document> list = documentService.getPendingDocuments(userId);
        return Result.success(list);
    }

    /**
     * 公文归档查询
     */
    @GetMapping("/archive")
    public Result<Page<Document>> getArchive(
            @RequestParam(defaultValue = "1") Integer page,
            @RequestParam(defaultValue = "10") Integer size,
            @RequestParam(required = false) String keyword) {
        Page<Document> pageObj = new Page<>(page, size);
        LambdaQueryWrapper<Document> wrapper = new LambdaQueryWrapper<>();
        wrapper.eq(Document::getStatus, 2); // 已归档
        if (StringUtils.hasText(keyword)) {
            wrapper.like(Document::getTitle, keyword);
        }
        wrapper.orderByDesc(Document::getUpdateTime);
        return Result.success(documentService.page(pageObj, wrapper));
    }
}
```

**DocumentServiceImpl.java**
```java
@Service
public class DocumentServiceImpl extends ServiceImpl<DocumentMapper, Document>
    implements DocumentService {

    @Autowired
    private DocumentApprovalMapper approvalMapper;

    @Override
    @Transactional
    public void createApproval(Long documentId, Long userId) {
        // 获取审批流程配置
        List<Long> approverList = getApprovalFlow(documentId);

        // 创建审批记录
        for (int i = 0; i < approverList.size(); i++) {
            DocumentApproval approval = new DocumentApproval();
            approval.setDocumentId(documentId);
            approval.setApproverId(approverList.get(i));
            approval.setStep(i + 1);
            approval.setStatus(0); // 待审批
            approvalMapper.insert(approval);
        }
    }

    @Override
    @Transactional
    public void approve(DocumentApproval approval) {
        // 更新审批记录
        approvalMapper.updateById(approval);

        // 更新公文状态
        Document document = this.getById(approval.getDocumentId());

        if (approval.getStatus() == 2) { // 退回
            document.setStatus(3); // 已退回
            document.setUpdateTime(new Date());
            this.updateById(document);
        } else if (approval.getStatus() == 1) { // 通过
            // 检查是否还有后续审批
            LambdaQueryWrapper<DocumentApproval> wrapper = new LambdaQueryWrapper<>();
            wrapper.eq(DocumentApproval::getDocumentId, approval.getDocumentId());
            wrapper.eq(DocumentApproval::getStatus, 0);
            long count = approvalMapper.selectCount(wrapper);

            if (count == 0) {
                // 所有审批通过，归档
                document.setStatus(2);
                document.setUpdateTime(new Date());
                this.updateById(document);
            }
        }
    }

    @Override
    public List<Document> getPendingDocuments(Long userId) {
        // 查询待审批的公文ID
        LambdaQueryWrapper<DocumentApproval> wrapper = new LambdaQueryWrapper<>();
        wrapper.eq(DocumentApproval::getApproverId, userId);
        wrapper.eq(DocumentApproval::getStatus, 0);
        List<DocumentApproval> approvals = approvalMapper.selectList(wrapper);

        if (approvals.isEmpty()) {
            return new ArrayList<>();
        }

        List<Long> docIds = approvals.stream()
            .map(DocumentApproval::getDocumentId)
            .collect(Collectors.toList());

        // 查询公文详情
        return this.listByIds(docIds);
    }
}
```

#### 4.2.2. 公文流转前端实现

**Draft.vue（公文起草）**
```vue
<template>
  <div class="draft-container">
    <el-card class="box-card">
      <div slot="header" class="clearfix">
        <span>公文起草</span>
      </div>

      <el-form :model="form" :rules="rules" ref="form" label-width="100px">
        <el-form-item label="公文标题" prop="title">
          <el-input v-model="form.title" placeholder="请输入公文标题"></el-input>
        </el-form-item>

        <el-form-item label="优先级" prop="priority">
          <el-select v-model="form.priority" placeholder="请选择">
            <el-option label="普通" :value="1"></el-option>
            <el-option label="紧急" :value="2"></el-option>
            <el-option label="特急" :value="3"></el-option>
          </el-select>
        </el-form-item>

        <el-form-item label="公文内容" prop="content">
          <editor v-model="form.content" height="400px"></editor>
        </el-form-item>

        <el-form-item label="附件上传">
          <el-upload
            class="upload-demo"
            action="/api/upload"
            :on-success="handleSuccess"
            :on-remove="handleRemove"
            multiple
            :file-list="form.attachments">
            <el-button size="small" type="primary">点击上传</el-button>
            <div slot="tip" class="el-upload__tip">
              支持多个文件上传，单个文件不超过10MB
            </div>
          </el-upload>
        </el-form-item>

        <el-form-item>
          <el-button type="primary" @click="saveDraft">保存草稿</el-button>
          <el-button type="success" @click="submitApproval">提交审批</el-button>
          <el-button @click="resetForm">重置</el-button>
        </el-form-item>
      </el-form>
    </el-card>
  </div>
</template>

<script>
import Editor from '@/components/Editor/index.vue'
import { createDocument, submitDocument } from '@/api/document'

export default {
  name: 'DocumentDraft',
  components: { Editor },
  data() {
    return {
      form: {
        title: '',
        priority: 1,
        content: '',
        attachments: []
      },
      rules: {
        title: [
          { required: true, message: '请输入公文标题', trigger: 'blur' },
          { max: 200, message: '标题长度不能超过200字符', trigger: 'blur' }
        ],
        priority: [
          { required: true, message: '请选择优先级', trigger: 'change' }
        ],
        content: [
          { required: true, message: '请输入公文内容', trigger: 'blur' }
        ]
      }
    }
  },
  methods: {
    // 保存草稿
    saveDraft() {
      this.$refs.form.validate((valid) => {
        if (valid) {
          createDocument(this.form).then(res => {
            this.$message.success('草稿保存成功');
            this.$router.push('/document/list');
          })
        }
      })
    },

    // 提交审批
    submitApproval() {
      this.$refs.form.validate((valid) => {
        if (valid) {
          createDocument(this.form).then(res => {
            const docId = res.data.id;
            submitDocument(docId).then(() => {
              this.$message.success('提交审批成功');
              this.$router.push('/document/list');
            })
          })
        }
      })
    },

    // 上传成功回调
    handleSuccess(response, file, fileList) {
      this.form.attachments.push({
        name: file.name,
        url: response.data.url
      })
    },

    // 文件移除
    handleRemove(file, fileList) {
      this.form.attachments = fileList
    },

    // 重置表单
    resetForm() {
      this.$refs.form.resetFields()
      this.form.attachments = []
    }
  }
}
</script>

<style scoped>
.draft-container {
  padding: 20px;
}
</style>
```

**Approval.vue（公文审批）**
```vue
<template>
  <div class="approval-container">
    <el-card class="box-card">
      <div slot="header" class="clearfix">
        <span>待审批公文</span>
      </div>

      <el-table :data="tableData" border style="width: 100%">
        <el-table-column prop="title" label="公文标题" width="300">
          <template slot-scope="scope">
            <el-button type="text" @click="viewDetail(scope.row)">
              {{ scope.row.title }}
            </el-button>
          </template>
        </el-table-column>

        <el-table-column prop="draftUserName" label="起草人" width="120">
        </el-table-column>

        <el-table-column prop="priority" label="优先级" width="100">
          <template slot-scope="scope">
            <el-tag :type="getPriorityType(scope.row.priority)">
              {{ getPriorityText(scope.row.priority) }}
            </el-tag>
          </template>
        </el-table-column>

        <el-table-column prop="createTime" label="起草时间" width="180">
          <template slot-scope="scope">
            {{ formatDate(scope.row.createTime) }}
          </template>
        </el-table-column>

        <el-table-column label="操作">
          <template slot-scope="scope">
            <el-button size="mini" type="primary" @click="handleApprove(scope.row)">
              审批
            </el-button>
          </template>
        </el-table-column>
      </el-table>

      <!-- 审批对话框 -->
      <el-dialog title="公文审批" :visible.sync="dialogVisible" width="60%">
        <div class="document-content">
          <h3>{{ currentDoc.title }}</h3>
          <div class="meta">
            <span>起草人：{{ currentDoc.draftUserName }}</span>
            <span style="margin-left: 20px">
              优先级：{{ getPriorityText(currentDoc.priority) }}
            </span>
          </div>
          <div class="content" v-html="currentDoc.content"></div>
        </div>

        <el-form :model="approvalForm" label-width="80px" style="margin-top: 20px">
          <el-form-item label="审批意见">
            <el-input
              type="textarea"
              v-model="approvalForm.opinion"
              rows="4"
              placeholder="请输入审批意见"></el-input>
          </el-form-item>

          <el-form-item label="审批结果">
            <el-radio-group v-model="approvalForm.status">
              <el-radio :label="1">通过</el-radio>
              <el-radio :label="2">退回</el-radio>
            </el-radio-group>
          </el-form-item>
        </el-form>

        <span slot="footer" class="dialog-footer">
          <el-button @click="dialogVisible = false">取 消</el-button>
          <el-button type="primary" @click="submitApproval">确 定</el-button>
        </span>
      </el-dialog>
    </el-card>
  </div>
</template>

<script>
import { getPendingList, approveDocument, getDocumentDetail } from '@/api/document'

export default {
  name: 'DocumentApproval',
  data() {
    return {
      tableData: [],
      dialogVisible: false,
      currentDoc: {},
      approvalForm: {
        opinion: '',
        status: 1
      }
    }
  },
  created() {
    this.loadData()
  },
  methods: {
    loadData() {
      getPendingList().then(res => {
        this.tableData = res.data
      })
    },

    viewDetail(row) {
      getDocumentDetail(row.id).then(res => {
        this.currentDoc = res.data
        this.dialogVisible = true
      })
    },

    handleApprove(row) {
      this.currentDoc = row
      this.approvalForm = {
        opinion: '',
        status: 1
      }
      this.dialogVisible = true
    },

    submitApproval() {
      const params = {
        documentId: this.currentDoc.id,
        opinion: this.approvalForm.opinion,
        status: this.approvalForm.status
      }

      approveDocument(params).then(() => {
        this.$message.success('审批成功');
        this.dialogVisible = false;
        this.loadData();
      })
    },

    getPriorityType(priority) {
      const map = { 1: '', 2: 'warning', 3: 'danger' }
      return map[priority] || ''
    },

    getPriorityText(priority) {
      const map = { 1: '普通', 2: '紧急', 3: '特急' }
      return map[priority] || ''
    },

    formatDate(date) {
      if (!date) return ''
      return new Date(date).toLocaleString()
    }
  }
}
</script>

<style scoped>
.approval-container {
  padding: 20px;
}
.document-content {
  padding: 10px;
  border: 1px solid #ebeef5;
  border-radius: 4px;
}
.document-content h3 {
  margin: 0 0 10px 0;
  text-align: center;
}
.meta {
  color: #909399;
  font-size: 14px;
  margin-bottom: 15px;
}
.content {
  line-height: 1.8;
  font-size: 15px;
}
</style>
```

#### 4.2.3. 学籍管理后端实现

**StudentController.java**
```java
@RestController
@RequestMapping("/api/student")
public class StudentController {

    @Autowired
    private StudentService studentService;

    /**
     * 分页查询学生信息
     */
    @GetMapping("/list")
    public Result<Page<Student>> list(
            @RequestParam(defaultValue = "1") Integer page,
            @RequestParam(defaultValue = "10") Integer size,
            @RequestParam(required = false) String name,
            @RequestParam(required = false) String schoolId,
            @RequestParam(required = false) String grade,
            @RequestParam(required = false) String clazz) {

        Page<Student> pageObj = new Page<>(page, size);
        LambdaQueryWrapper<Student> wrapper = new LambdaQueryWrapper<>();

        if (StringUtils.hasText(name)) {
            wrapper.like(Student::getName, name);
        }
        if (StringUtils.hasText(schoolId)) {
            wrapper.eq(Student::getSchoolId, schoolId);
        }
        if (StringUtils.hasText(grade)) {
            wrapper.eq(Student::getGrade, grade);
        }
        if (StringUtils.hasText(clazz)) {
            wrapper.eq(Student::getClass, clazz);
        }

        wrapper.orderByDesc(Student::getCreateTime);
        return Result.success(studentService.page(pageObj, wrapper));
    }

    /**
     * 添加学生
     */
    @PostMapping("/add")
    public Result<Void> add(@RequestBody Student student) {
        // 生成学籍号
        String studentNumber = studentService.generateStudentNumber(
            student.getSchoolId(), student.getGrade());
        student.setStudentNumber(studentNumber);

        student.setCreateTime(new Date());
        student.setUpdateTime(new Date());
        studentService.save(student);
        return Result.success();
    }

    /**
     * 批量导入学生
     */
    @PostMapping("/import")
    public Result<Map<String, Object>> importStudents(@RequestBody List<Student> students) {
        Map<String, Object> result = studentService.batchImport(students);
        return Result.success(result);
    }

    /**
     * 学籍变动申请
     */
    @PostMapping("/change")
    public Result<Void> change(@RequestBody StudentChange change) {
        change.setCreateTime(new Date());
        change.setStatus(0); // 待审核
        studentService.saveChange(change);
        return Result.success();
    }

    /**
     * 审核学籍变动
     */
    @PostMapping("/approve-change/{changeId}")
    public Result<Void> approveChange(
            @PathVariable Long changeId,
            @RequestParam Integer status) {

        StudentChange change = new StudentChange();
        change.setId(changeId);
        change.setStatus(status);
        change.setApproveUserId(getCurrentUserId());
        change.setApproveTime(new Date());

        studentService.approveChange(change);
        return Result.success();
    }

    /**
     * 导出学生信息
     */
    @GetMapping("/export")
    public void exportStudents(
            @RequestParam(required = false) String schoolId,
            @RequestParam(required = false) String grade,
            HttpServletResponse response) throws IOException {

        List<Student> list = studentService.getStudents(schoolId, grade);
        studentService.exportToExcel(list, response);
    }
}
```

**StudentServiceImpl.java**
```java
@Service
public class StudentServiceImpl extends ServiceImpl<StudentMapper, Student>
    implements StudentService {

    @Autowired
    private StudentChangeMapper changeMapper;

    @Autowired
    private StudentHistoryMapper historyMapper;

    private static final String[] GRADES = {"一年级", "二年级", "三年级",
        "四年级", "五年级", "六年级", "七年级", "八年级", "九年级"};

    @Override
    public String generateStudentNumber(String schoolId, String grade) {
        // 学籍号格式：学校代码+年级代码+入学年份+序号
        // 示例：5101012024001

        String year = String.valueOf(Calendar.getInstance().get(Calendar.YEAR));
        String gradeCode = String.format("%02d", getGradeCode(grade));

        // 查询当前年级已注册人数
        LambdaQueryWrapper<Student> wrapper = new LambdaQueryWrapper<>();
        wrapper.eq(Student::getSchoolId, schoolId);
        wrapper.eq(Student::getGrade, grade);
        long count = baseMapper.selectCount(wrapper);

        String seq = String.format("%03d", count + 1);
        return schoolId + gradeCode + year + seq;
    }

    @Override
    @Transactional
    public Map<String, Object> batchImport(List<Student> students) {
        Map<String, Object> result = new HashMap<>();
        List<String> successList = new ArrayList<>();
        List<String> failList = new ArrayList<>();

        for (Student student : students) {
            try {
                // 生成学籍号
                String number = generateStudentNumber(
                    student.getSchoolId(), student.getGrade());
                student.setStudentNumber(number);

                student.setCreateTime(new Date());
                student.setUpdateTime(new Date());

                baseMapper.insert(student);
                successList.add(student.getName());

                // 记录历史
                recordHistory(student.getId(), "IMPORT", "批量导入学生信息");

            } catch (Exception e) {
                failList.add(student.getName() + "：" + e.getMessage());
            }
        }

        result.put("success", successList.size());
        result.put("fail", failList.size());
        result.put("successList", successList);
        result.put("failList", failList);

        return result;
    }

    @Override
    @Transactional
    public void approveChange(StudentChange change) {
        // 更新变动记录
        changeMapper.updateById(change);

        if (change.getStatus() == 1) { // 通过
            Student student = baseMapper.selectById(change.getStudentId());

            // 根据变动类型更新学生状态
            switch (change.getChangeType()) {
                case 1: // 转学
                    student.setStatus(3);
                    break;
                case 2: // 休学
                    student.setStatus(2);
                    break;
                case 3: // 复学
                    student.setStatus(1);
                    break;
                case 4: // 退学
                    student.setStatus(5);
                    break;
            }

            student.setUpdateTime(new Date());
            baseMapper.updateById(student);

            // 记录历史
            recordHistory(change.getStudentId(), "CHANGE",
                "学籍变动：" + getChangeTypeName(change.getChangeType()));
        }
    }

    @Override
    public void exportToExcel(List<Student> list, HttpServletResponse response)
            throws IOException {

        // 创建Excel工作簿
        XSSFWorkbook workbook = new XSSFWorkbook();
        XSSFSheet sheet = workbook.createSheet("学生信息");

        // 创建表头
        XSSFRow header = sheet.createRow(0);
        String[] headers = {"学籍号", "姓名", "性别", "身份证号", "学校",
            "年级", "班级", "联系电话", "学籍状态"};
        for (int i = 0; i < headers.length; i++) {
            header.createCell(i).setCellValue(headers[i]);
        }

        // 填充数据
        for (int i = 0; i < list.size(); i++) {
            Student student = list.get(i);
            XSSFRow row = sheet.createRow(i + 1);

            row.createCell(0).setCellValue(student.getStudentNumber());
            row.createCell(1).setCellValue(student.getName());
            row.createCell(2).setCellValue(student.getGender() == 1 ? "男" : "女");
            row.createCell(3).setCellValue(student.getIdCard());
            row.createCell(4).setCellValue(student.getSchoolId()); // 实际应查询学校名称
            row.createCell(5).setCellValue(student.getGrade());
            row.createCell(6).setCellValue(student.getClass());
            row.createCell(7).setCellValue(student.getPhone());
            row.createCell(8).setCellValue(getStatusText(student.getStatus()));
        }

        // 设置响应头
        response.setContentType("application/vnd.ms-excel");
        response.setCharacterEncoding("UTF-8");
        String fileName = URLEncoder.encode("学生信息_" +
            new SimpleDateFormat("yyyyMMdd").format(new Date()) + ".xlsx", "UTF-8");
        response.setHeader("Content-Disposition", "attachment;filename=" + fileName);

        // 写入响应流
        workbook.write(response.getOutputStream());
        workbook.close();
    }

    private int getGradeCode(String grade) {
        for (int i = 0; i < GRADES.length; i++) {
            if (GRADES[i].equals(grade)) {
                return i + 1;
            }
        }
        return 1;
    }

    private String getChangeTypeName(int type) {
        String[] names = {"", "转学", "休学", "复学", "退学"};
        return names[type];
    }

    private String getStatusText(int status) {
        String[] texts = {"", "在读", "休学", "转学", "毕业", "退学"};
        return texts[status];
    }

    private void recordHistory(Long studentId, String type, String content) {
        StudentHistory history = new StudentHistory();
        history.setStudentId(studentId);
        history.setOperationType(type);
        history.setOperationContent(content);
        history.setOperatorId(getCurrentUserId());
        history.setOperationTime(new Date());
        historyMapper.insert(history);
    }
}
```

#### 4.2.4. 学籍管理前端实现

**InfoManage.vue（学生信息管理）**
```vue
<template>
  <div class="student-info">
    <el-card class="box-card">
      <div slot="header" class="clearfix">
        <span>学生信息管理</span>
        <el-button style="float: right; margin-left: 10px" type="primary"
          @click="showImportDialog">批量导入</el-button>
        <el-button style="float: right" type="success"
          @click="showAddDialog">添加学生</el-button>
      </div>

      <!-- 搜索栏 -->
      <div class="search-bar">
        <el-input v-model="search.name" placeholder="学生姓名"
          style="width: 200px; margin-right: 10px"></el-input>
        <el-select v-model="search.grade" placeholder="年级"
          style="width: 150px; margin-right: 10px" clearable>
          <el-option label="七年级" value="七年级"></el-option>
          <el-option label="八年级" value="八年级"></el-option>
          <el-option label="九年级" value="九年级"></el-option>
        </el-select>
        <el-input v-model="search.class" placeholder="班级"
          style="width: 120px; margin-right: 10px"></el-input>
        <el-button type="primary" @click="searchData">搜索</el-button>
        <el-button type="info" @click="exportData">导出Excel</el-button>
      </div>

      <!-- 数据表格 -->
      <el-table :data="tableData" border style="width: 100%; margin-top: 15px"
        v-loading="loading">
        <el-table-column prop="studentNumber" label="学籍号" width="150" fixed>
        </el-table-column>

        <el-table-column prop="name" label="姓名" width="100">
        </el-table-column>

        <el-table-column prop="gender" label="性别" width="60">
          <template slot-scope="scope">
            {{ scope.row.gender === 1 ? '男' : '女' }}
          </template>
        </el-table-column>

        <el-table-column prop="idCard" label="身份证号" width="180">
        </el-table-column>

        <el-table-column prop="grade" label="年级" width="100">
        </el-table-column>

        <el-table-column prop="class" label="班级" width="80">
        </el-table-column>

        <el-table-column prop="phone" label="联系电话" width="120">
        </el-table-column>

        <el-table-column prop="status" label="学籍状态" width="100">
          <template slot-scope="scope">
            <el-tag :type="getStatusType(scope.row.status)">
              {{ getStatusText(scope.row.status) }}
            </el-tag>
          </template>
        </el-table-column>

        <el-table-column label="操作" width="180" fixed="right">
          <template slot-scope="scope">
            <el-button size="mini" @click="handleEdit(scope.row)">编辑</el-button>
            <el-button size="mini" type="danger" @click="handleDelete(scope.row)">
              删除
            </el-button>
          </template>
        </el-table-column>
      </el-table>

      <!-- 分页 -->
      <div class="pagination" style="margin-top: 15px">
        <el-pagination
          @size-change="handleSizeChange"
          @current-change="handleCurrentChange"
          :current-page="pagination.current"
          :page-sizes="[10, 20, 50, 100]"
          :page-size="pagination.size"
          layout="total, sizes, prev, pager, next, jumper"
          :total="pagination.total">
        </el-pagination>
      </div>
    </el-card>

    <!-- 添加/编辑对话框 -->
    <el-dialog :title="dialogTitle" :visible.sync="dialogVisible" width="500px">
      <el-form :model="studentForm" :rules="rules" ref="studentForm"
        label-width="100px">
        <el-form-item label="姓名" prop="name">
          <el-input v-model="studentForm.name"></el-input>
        </el-form-item>

        <el-form-item label="性别" prop="gender">
          <el-radio-group v-model="studentForm.gender">
            <el-radio :label="1">男</el-radio>
            <el-radio :label="0">女</el-radio>
          </el-radio-group>
        </el-form-item>

        <el-form-item label="身份证号" prop="idCard">
          <el-input v-model="studentForm.idCard"></el-input>
        </el-form-item>

        <el-form-item label="出生日期" prop="birthday">
          <el-date-picker v-model="studentForm.birthday"
            type="date" placeholder="选择日期" style="width: 100%">
          </el-date-picker>
        </el-form-item>

        <el-form-item label="学校" prop="schoolId">
          <el-select v-model="studentForm.schoolId" placeholder="请选择学校"
            style="width: 100%">
            <el-option label="第一中学" value="1"></el-option>
            <el-option label="第二中学" value="2"></el-option>
          </el-select>
        </el-form-item>

        <el-form-item label="年级" prop="grade">
          <el-select v-model="studentForm.grade" placeholder="请选择年级"
            style="width: 100%">
            <el-option label="七年级" value="七年级"></el-option>
            <el-option label="八年级" value="八年级"></el-option>
            <el-option label="九年级" value="九年级"></el-option>
          </el-select>
        </el-form-item>

        <el-form-item label="班级" prop="class">
          <el-input v-model="studentForm.class" placeholder="如：1班"></el-input>
        </el-form-item>

        <el-form-item label="联系电话" prop="phone">
          <el-input v-model="studentForm.phone"></el-input>
        </el-form-item>

        <el-form-item label="家庭住址" prop="address">
          <el-input type="textarea" v-model="studentForm.address"></el-input>
        </el-form-item>
      </el-form>

      <span slot="footer" class="dialog-footer">
        <el-button @click="dialogVisible = false">取 消</el-button>
        <el-button type="primary" @click="submitForm">确 定</el-button>
      </span>
    </el-dialog>

    <!-- 导入对话框 -->
    <el-dialog title="批量导入学生" :visible.sync="importVisible" width="600px">
      <div style="margin-bottom: 15px">
        <el-upload
          class="upload-demo"
          action="/api/student/import-excel"
          :on-success="handleImportSuccess"
          :on-error="handleImportError"
          :before-upload="beforeUpload"
          accept=".xlsx,.xls"
          :file-list="fileList">
          <el-button size="small" type="primary">点击上传Excel文件</el-button>
          <div slot="tip" class="el-upload__tip">
            请下载模板文件，按格式填写后上传。支持.xlsx和.xls格式
          </div>
        </el-upload>
      </div>

      <div v-if="importResult">
        <el-alert :title="'导入结果：成功 ' + importResult.success +
          ' 条，失败 ' + importResult.fail + ' 条'"
          :type="importResult.fail > 0 ? 'warning' : 'success'"
          :closable="false">
        </el-alert>

        <div v-if="importResult.failList && importResult.failList.length > 0"
          style="margin-top: 10px; max-height: 200px; overflow-y: auto">
          <p style="font-weight: bold; color: #f56c6c">失败详情：</p>
          <p v-for="(item, index) in importResult.failList" :key="index"
            style="color: #f56c6c; font-size: 12px; margin: 2px 0">
            {{ item }}
          </p>
        </div>
      </div>

      <span slot="footer" class="dialog-footer">
        <el-button @click="importVisible = false">关 闭</el-button>
      </span>
    </el-dialog>
  </div>
</template>

<script>
import {
  getStudentList,
  addStudent,
  updateStudent,
  deleteStudent,
  importStudents,
  exportStudents
} from '@/api/student'

export default {
  name: 'StudentInfoManage',
  data() {
    return {
      search: {
        name: '',
        grade: '',
        class: ''
      },
      tableData: [],
      pagination: {
        current: 1,
        size: 10,
        total: 0
      },
      loading: false,
      dialogVisible: false,
      importVisible: false,
      dialogTitle: '添加学生',
      studentForm: {
        id: null,
        name: '',
        gender: 1,
        idCard: '',
        birthday: '',
        schoolId: '',
        grade: '',
        class: '',
        phone: '',
        address: ''
      },
      rules: {
        name: [{ required: true, message: '请输入姓名', trigger: 'blur' }],
        gender: [{ required: true, message: '请选择性别', trigger: 'change' }],
        idCard: [
          { required: true, message: '请输入身份证号', trigger: 'blur' },
          { pattern: /^\d{17}[\dXx]$/, message: '请输入正确的身份证号', trigger: 'blur' }
        ],
        schoolId: [{ required: true, message: '请选择学校', trigger: 'change' }],
        grade: [{ required: true, message: '请选择年级', trigger: 'change' }],
        class: [{ required: true, message: '请输入班级', trigger: 'blur' }]
      },
      fileList: [],
      importResult: null
    }
  },
  created() {
    this.loadData()
  },
  methods: {
    loadData() {
      this.loading = true
      const params = {
        page: this.pagination.current,
        size: this.pagination.size,
        name: this.search.name,
        grade: this.search.grade,
        class: this.search.class
      }

      getStudentList(params).then(res => {
        this.tableData = res.data.records
        this.pagination.total = res.data.total
        this.loading = false
      }).catch(() => {
        this.loading = false
      })
    },

    searchData() {
      this.pagination.current = 1
      this.loadData()
    },

    showAddDialog() {
      this.dialogTitle = '添加学生'
      this.studentForm = {
        id: null,
        name: '',
        gender: 1,
        idCard: '',
        birthday: '',
        schoolId: '',
        grade: '',
        class: '',
        phone: '',
        address: ''
      }
      this.dialogVisible = true
    },

    handleEdit(row) {
      this.dialogTitle = '编辑学生'
      this.studentForm = { ...row }
      this.dialogVisible = true
    },

    handleDelete(row) {
      this.$confirm('确定要删除该学生信息吗？', '提示', {
        confirmButtonText: '确定',
        cancelButtonText: '取消',
        type: 'warning'
      }).then(() => {
        deleteStudent(row.id).then(() => {
          this.$message.success('删除成功')
          this.loadData()
        })
      })
    },

    submitForm() {
      this.$refs.studentForm.validate((valid) => {
        if (valid) {
          if (this.studentForm.id) {
            // 编辑
            updateStudent(this.studentForm).then(() => {
              this.$message.success('修改成功')
              this.dialogVisible = false
              this.loadData()
            })
          } else {
            // 添加
            addStudent(this.studentForm).then(() => {
              this.$message.success('添加成功')
              this.dialogVisible = false
              this.loadData()
            })
          }
        }
      })
    },

    showImportDialog() {
      this.importVisible = true
      this.importResult = null
      this.fileList = []
    },

    beforeUpload(file) {
      const isExcel = file.type === 'application/vnd.ms-excel' ||
        file.type === 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'
      if (!isExcel) {
        this.$message.error('只能上传Excel文件!')
        return false
      }
      return true
    },

    handleImportSuccess(response) {
      if (response.code === 200) {
        this.importResult = response.data
        this.loadData()
      } else {
        this.$message.error(response.message || '导入失败')
      }
    },

    handleImportError() {
      this.$message.error('上传失败，请检查文件格式')
    },

    exportData() {
      const params = {
        schoolId: '',
        grade: this.search.grade
      }

      exportStudents(params).then(res => {
        // 文件下载在后端处理
      })
    },

    handleSizeChange(val) {
      this.pagination.size = val
      this.loadData()
    },

    handleCurrentChange(val) {
      this.pagination.current = val
      this.loadData()
    },

    getStatusType(status) {
      const map = { 1: 'success', 2: 'warning', 3: 'info', 4: 'info', 5: 'danger' }
      return map[status] || ''
    },

    getStatusText(status) {
      const map = { 1: '在读', 2: '休学', 3: '转学', 4: '毕业', 5: '退学' }
      return map[status] || ''
    }
  }
}
</script>

<style scoped>
.student-info {
  padding: 20px;
}
.search-bar {
  margin-bottom: 15px;
}
</style>
```

**Change.vue（学籍变动）**
```vue
<template>
  <div class="student-change">
    <el-card class="box-card">
      <div slot="header" class="clearfix">
        <span>学籍变动管理</span>
        <el-button style="float: right" type="primary"
          @click="showApplyDialog">申请变动</el-button>
      </div>

      <!-- 待审核列表（管理员/教师） -->
      <div v-if="hasPermission">
        <h4 style="margin: 0 0 10px 0">待审核申请</h4>
        <el-table :data="pendingList" border style="width: 100%; margin-bottom: 20px">
          <el-table-column prop="studentName" label="学生姓名" width="100">
          </el-table-column>

          <el-table-column prop="changeType" label="变动类型" width="100">
            <template slot-scope="scope">
              {{ getChangeTypeText(scope.row.changeType) }}
            </template>
          </el-table-column>

          <el-table-column prop="reason" label="申请原因" min-width="200">
          </el-table-column>

          <el-table-column prop="createTime" label="申请时间" width="180">
            <template slot-scope="scope">
              {{ formatDate(scope.row.createTime) }}
            </template>
          </el-table-column>

          <el-table-column label="操作" width="150">
            <template slot-scope="scope">
              <el-button size="mini" type="success"
                @click="handleApprove(scope.row, 1)">通过</el-button>
              <el-button size="mini" type="danger"
                @click="handleApprove(scope.row, 2)">拒绝</el-button>
            </template>
          </el-table-column>
        </el-table>
      </div>

      <!-- 变动历史 -->
      <h4 style="margin: 0 0 10px 0">变动记录</h4>
      <el-table :data="changeList" border style="width: 100%" v-loading="loading">
        <el-table-column prop="studentName" label="学生姓名" width="100">
        </el-table-column>

        <el-table-column prop="changeType" label="变动类型" width="100">
          <template slot-scope="scope">
            {{ getChangeTypeText(scope.row.changeType) }}
          </template>
        </el-table-column>

        <el-table-column prop="reason" label="原因" min-width="200">
        </el-table-column>

        <el-table-column prop="status" label="状态" width="100">
          <template slot-scope="scope">
            <el-tag :type="getStatusType(scope.row.status)">
              {{ getStatusText(scope.row.status) }}
            </el-tag>
          </template>
        </el-table-column>

        <el-table-column prop="approveTime" label="处理时间" width="180">
          <template slot-scope="scope">
            {{ formatDate(scope.row.approveTime) }}
          </template>
        </el-table-column>
      </el-table>

      <div class="pagination" style="margin-top: 15px">
        <el-pagination
          @size-change="handleSizeChange"
          @current-change="handleCurrentChange"
          :current-page="pagination.current"
          :page-sizes="[10, 20, 50]"
          :page-size="pagination.size"
          layout="total, sizes, prev, pager, next, jumper"
          :total="pagination.total">
        </el-pagination>
      </div>
    </el-card>

    <!-- 申请对话框 -->
    <el-dialog title="学籍变动申请" :visible.sync="applyVisible" width="600px">
      <el-form :model="applyForm" :rules="rules" ref="applyForm"
        label-width="120px">

        <el-form-item label="学生" prop="studentId">
          <el-select v-model="applyForm.studentId" placeholder="请选择学生"
            style="width: 100%" filterable>
            <el-option
              v-for="student in studentOptions"
              :key="student.id"
              :label="student.name + ' (' + student.studentNumber + ')'"
              :value="student.id">
            </el-option>
          </el-select>
        </el-form-item>

        <el-form-item label="变动类型" prop="changeType">
          <el-select v-model="applyForm.changeType" placeholder="请选择变动类型"
            style="width: 100%">
            <el-option label="转学" :value="1"></el-option>
            <el-option label="休学" :value="2"></el-option>
            <el-option label="复学" :value="3"></el-option>
            <el-option label="退学" :value="4"></el-option>
          </el-select>
        </el-form-item>

        <el-form-item v-if="applyForm.changeType === 1" label="转入学校"
          prop="toSchool">
          <el-input v-model="applyForm.toSchool" placeholder="请输入转入学校名称"></el-input>
        </el-form-item>

        <el-form-item v-if="applyForm.changeType === 1" label="转出学校"
          prop="fromSchool">
          <el-input v-model="applyForm.fromSchool" placeholder="请输入转出学校名称"></el-input>
        </el-form-item>

        <el-form-item v-if="applyForm.changeType === 2" label="休学时间"
          prop="dateRange">
          <el-date-picker
            v-model="dateRange"
            type="daterange"
            range-separator="至"
            start-placeholder="开始日期"
            end-placeholder="结束日期"
            style="width: 100%"
            value-format="yyyy-MM-dd">
          </el-date-picker>
        </el-form-item>

        <el-form-item label="申请原因" prop="reason">
          <el-input type="textarea" v-model="applyForm.reason"
            rows="4" placeholder="请详细说明申请原因"></el-input>
        </el-form-item>
      </el-form>

      <span slot="footer" class="dialog-footer">
        <el-button @click="applyVisible = false">取 消</el-button>
        <el-button type="primary" @click="submitApply">提交申请</el-button>
      </span>
    </el-dialog>
  </div>
</template>

<script>
import {
  getChangeList,
  applyChange,
  approveChange,
  getStudentOptions
} from '@/api/student'

export default {
  name: 'StudentChange',
  data() {
    return {
      hasPermission: true, // 实际应从权限系统获取
      pendingList: [],
      changeList: [],
      loading: false,
      applyVisible: false,
      pagination: {
        current: 1,
        size: 10,
        total: 0
      },
      applyForm: {
        studentId: '',
        changeType: '',
        reason: '',
        toSchool: '',
        fromSchool: ''
      },
      dateRange: [],
      studentOptions: [],
      rules: {
        studentId: [{ required: true, message: '请选择学生', trigger: 'change' }],
        changeType: [{ required: true, message: '请选择变动类型', trigger: 'change' }],
        reason: [{ required: true, message: '请输入申请原因', trigger: 'blur' }]
      }
    }
  },
  created() {
    this.loadData()
  },
  methods: {
    loadData() {
      this.loading = true
      const params = {
        page: this.pagination.current,
        size: this.pagination.size
      }

      getChangeList(params).then(res => {
        this.changeList = res.data.records
        this.pagination.total = res.data.total

        // 分离待审核列表
        this.pendingList = this.changeList.filter(item => item.status === 0)
        this.loading = false
      }).catch(() => {
        this.loading = false
      })
    },

    showApplyDialog() {
      // 加载学生选项
      getStudentOptions().then(res => {
        this.studentOptions = res.data
      })

      this.applyForm = {
        studentId: '',
        changeType: '',
        reason: '',
        toSchool: '',
        fromSchool: ''
      }
      this.dateRange = []
      this.applyVisible = true
    },

    submitApply() {
      this.$refs.applyForm.validate((valid) => {
        if (valid) {
          const params = { ...this.applyForm }

          // 处理休学时间
          if (this.applyForm.changeType === 2 && this.dateRange.length === 2) {
            params.startDate = this.dateRange[0]
            params.endDate = this.dateRange[1]
          }

          applyChange(params).then(() => {
            this.$message.success('申请提交成功')
            this.applyVisible = false
            this.loadData()
          })
        }
      })
    },

    handleApprove(row, status) {
      const tip = status === 1 ? '通过' : '拒绝'
      this.$confirm(`确定${tip}该学籍变动申请吗？`, '提示', {
        confirmButtonText: '确定',
        cancelButtonText: '取消',
        type: status === 1 ? 'success' : 'warning'
      }).then(() => {
        approveChange(row.id, status).then(() => {
          this.$message.success(`${tip}成功`)
          this.loadData()
        })
      })
    },

    handleSizeChange(val) {
      this.pagination.size = val
      this.loadData()
    },

    handleCurrentChange(val) {
      this.pagination.current = val
      this.loadData()
    },

    getChangeTypeText(type) {
      const map = { 1: '转学', 2: '休学', 3: '复学', 4: '退学' }
      return map[type] || ''
    },

    getStatusType(status) {
      const map = { 0: 'info', 1: 'success', 2: 'danger' }
      return map[status] || ''
    },

    getStatusText(status) {
      const map = { 0: '待审核', 1: '已通过', 2: '已拒绝' }
      return map[status] || ''
    },

    formatDate(date) {
      if (!date) return ''
      return new Date(date).toLocaleString()
    }
  }
}
</script>

<style scoped>
.student-change {
  padding: 20px;
}
</style>
```

---

## 第五章 负责模块测试与功能展示

### 5.1. 测试

#### 5.1.1. 测试环境

| 配置项 | 环境信息 |
|--------|----------|
| 操作系统 | Windows 11 / CentOS 7 |
| JDK版本 | JDK 17 |
| 数据库 | MySQL 8.0 |
| 缓存 | Redis 7.0 |
| 前端框架 | Vue 3 + Element Plus |
| 后端框架 | Spring Boot 3.1.0 |
| 测试工具 | Postman, JUnit 5 |

#### 5.1.2. 功能测试

**公文流转模块测试用例**：

| 测试编号 | 测试功能 | 测试步骤 | 预期结果 | 实际结果 |
|----------|----------|----------|----------|----------|
| TC-001 | 公文起草 | 1. 登录系统<br>2. 进入公文起草页面<br>3. 填写标题、内容<br>4. 点击保存 | 公文保存成功，状态为草稿 | 通过 |
| TC-002 | 公文提交审批 | 1. 选择草稿公文<br>2. 点击提交审批 | 公文状态变为审批中，创建审批记录 | 通过 |
| TC-003 | 公文审批 | 1. 审批人登录<br>2. 进入待审批列表<br>3. 填写意见并审批 | 审批成功，公文流转到下一步 | 通过 |
| TC-004 | 公文退回 | 1. 审批人选择退回<br>2. 填写退回原因 | 公文状态变为已退回，返回起草人 | 通过 |
| TC-005 | 公文归档查询 | 1. 进入归档页面<br>2. 输入关键词搜索 | 显示匹配的已归档公文 | 通过 |

**学籍管理模块测试用例**：

| 测试编号 | 测试功能 | 测试步骤 | 预期结果 | 实际结果 |
|----------|----------|----------|----------|----------|
| TC-101 | 添加学生 | 1. 进入学生管理页面<br>2. 点击添加<br>3. 填写信息并保存 | 学生信息保存成功，自动生成学籍号 | 通过 |
| TC-102 | 批量导入 | 1. 准备Excel文件<br>2. 上传文件<br>3. 查看导入结果 | 成功导入数据，显示成功/失败统计 | 通过 |
| TC-103 | 学籍变动申请 | 1. 选择学生<br>2. 选择变动类型<br>3. 填写原因并提交 | 申请提交成功，状态为待审核 | 通过 |
| TC-104 | 变动审核 | 1. 管理员登录<br>2. 进入变动审核<br>3. 通过/拒绝申请 | 申请状态更新，学生学籍状态同步更新 | 通过 |
| TC-105 | 信息查询 | 1. 输入查询条件<br>2. 点击搜索 | 显示符合条件的学生列表 | 通过 |
| TC-106 | 数据导出 | 1. 设置导出条件<br>2. 点击导出 | 下载Excel文件，数据完整 | 通过 |

#### 5.1.3. 性能测试

**测试场景**：
1. 并发用户数：50人
2. 测试时长：10分钟
3. 测试工具：JMeter

**测试结果**：

| 接口 | 平均响应时间 | 成功率 | TPS |
|------|--------------|--------|-----|
| 公文列表查询 | 120ms | 100% | 415 |
| 公文审批 | 180ms | 100% | 275 |
| 学生信息查询 | 95ms | 100% | 525 |
| 学生批量导入 | 450ms | 100% | 220 |

**结论**：系统性能良好，满足业务需求。

### 5.2. 功能展示

#### 5.2.1. 公文流转功能展示

**1. 公文起草页面**
```
┌─────────────────────────────────────────────────────┐
│ 公文起草                                             │
├─────────────────────────────────────────────────────┤
│ 公文标题：[______________________________]          │
│ 优先级：   [普通 ▼]                                 │
│                                                      │
│ 公文内容：                                           │
│ ┌───────────────────────────────────────────────┐  │
│ │                                               │  │
│ │  （富文本编辑器区域）                         │  │
│ │                                               │  │
│ └───────────────────────────────────────────────┘  │
│                                                      │
│ 附件上传：                                           │
│ [点击上传]  支持多个文件上传，单个文件不超过10MB    │
│                                                      │
│ [保存草稿] [提交审批] [重置]                        │
└─────────────────────────────────────────────────────┘
```

**2. 待审批列表**
```
┌─────────────────────────────────────────────────────┐
│ 待审批公文                                           │
├─────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────────┐ │
│ │ 标题              起草人  优先级  时间       操作 │ │
│ ├─────────────────────────────────────────────────┤ │
│ │ 关于2024年春季... 张三    紧急    2025-01-15 审批 │ │
│ │ 2024年工作总结   李四    普通    2025-01-14 审批 │ │
│ │ 教学计划调整     王五    特急    2025-01-14 审批 │ │
│ └─────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────┘
```

**3. 公文审批对话框**
```
┌─────────────────────────────────────────────────────┐
│ 公文审批                                             │
├─────────────────────────────────────────────────────┤
│ 关于2024年春季学期教学安排的通知                     │
│ 起草人：张三    优先级：紧急                         │
│                                                      │
│ ┌───────────────────────────────────────────────┐  │
│ │                                               │  │
│ │  （公文内容展示区域）                         │  │
│ │                                               │  │
│ └───────────────────────────────────────────────┘  │
│                                                      │
│ 审批意见：                                           │
│ [________________________________________________] │
│ [________________________________________________] │
│                                                      │
│ 审批结果： (○) 通过   ( ) 退回                      │
│                                                      │
│ [取 消] [确 定]                                     │
└─────────────────────────────────────────────────────┘
```

#### 5.2.2. 学籍管理功能展示

**1. 学生信息管理页面**
```
┌─────────────────────────────────────────────────────┐
│ 学生信息管理                    [批量导入] [添加学生]│
├─────────────────────────────────────────────────────┤
│ 学生姓名：[________] 年级：[七年级▼] 班级：[___]   │
│ [搜索] [导出Excel]                                  │
├─────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────────┐ │
│ │学籍号      姓名 性别 身份证号      年级 班级  │ │
│ ├─────────────────────────────────────────────────┤ │
│ │5101012024001 张三 男  510101201001011234 七年级 1班 │ │
│ │5101012024002 李四 女  510101201002022345 七年级 1班 │ │
│ │5101012024003 王五 男  510101201003033456 七年级 2班 │ │
│ └─────────────────────────────────────────────────┘ │
│                                                      │
│ 共 127 条记录，第 1/13 页                           │
└─────────────────────────────────────────────────────┘
```

**2. 批量导入对话框**
```
┌─────────────────────────────────────────────────────┐
│ 批量导入学生                                         │
├─────────────────────────────────────────────────────┤
│ [点击上传Excel文件]                                 │
│ 请下载模板文件，按格式填写后上传                     │
│                                                      │
│ 导入结果：成功 25 条，失败 2 条                     │
│                                                      │
│ 失败详情：                                           │
│ 张六：身份证号格式错误                               │
│ 赵七：学校信息不存在                                 │
│                                                      │
│ [关 闭]                                             │
└─────────────────────────────────────────────────────┘
```

**3. 学籍变动申请**
```
┌─────────────────────────────────────────────────────┐
│ 学籍变动申请                                         │
├─────────────────────────────────────────────────────┤
│ 学生：[张三 (5101012024001) ▼]                     │
│ 变动类型：[转学 ▼]                                  │
│ 转入学校：[____________________________________]    │
│ 转出学校：[____________________________________]    │
│ 申请原因：                                           │
│ [________________________________________________] │
│ [________________________________________________] │
│                                                      │
│ [取 消] [提交申请]                                  │
└─────────────────────────────────────────────────────┘
```

**4. 变动审核列表**
```
┌─────────────────────────────────────────────────────┐
│ 待审核申请                                           │
├─────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────────┐ │
│ │学生姓名 变动类型  申请原因          申请时间  │ │
│ ├─────────────────────────────────────────────────┤ │
│ │张三     转学      因家庭搬迁        2025-01-15 │ │
│ │李四     休学      因病休学一年      2025-01-14 │ │
│ └─────────────────────────────────────────────────┘ │
│ [通过] [拒绝]                                       │
└─────────────────────────────────────────────────────┘
```

---

## 第六章 实训总结

### 6.1. 实训收获

通过本次为期9周的专业实习，我参与了"某市教育局综合信息服务平台"的开发工作，主要负责公文流转和学籍管理两个核心模块的前后端开发。这次实习让我获得了宝贵的实践经验，具体收获如下：

#### 6.1.1. 技术能力提升

1. **后端开发能力**
   - 深入掌握了Spring Boot 3框架的使用，包括RESTful API设计、MyBatis Plus操作、事务管理等
   - 学会了使用JWT进行身份认证和权限控制
   - 掌握了数据库设计的规范和优化技巧
   - 理解了分层架构的设计思想和实现方法

2. **前端开发能力**
   - 熟练使用Vue 3进行组件化开发
   - 掌握了Element Plus组件库的使用
   - 学会了Axios进行异步请求和拦截器配置
   - 理解了前后端分离的开发模式

3. **工程实践能力**
   - 掌握了Git版本控制的团队协作流程
   - 学会了编写接口文档和技术文档
   - 了解了软件开发的完整生命周期
   - 熟悉了单元测试和集成测试的方法

#### 6.1.2. 业务理解能力

1. **教育信息化业务**
   - 深入理解了教育行政管理的业务流程
   - 掌握了公文流转的标准流程和规范
   - 了解了学籍管理的政策要求和操作规范

2. **需求分析能力**
   - 学会了从用户角度思考问题
   - 掌握了需求文档的编写方法
   - 理解了功能模块的拆分和设计

#### 6.1.3. 软技能提升

1. **团队协作**
   - 学会了与团队成员有效沟通
   - 理解了敏捷开发的协作模式
   - 掌握了代码评审和版本管理的规范

2. **问题解决**
   - 培养了独立分析和解决问题的能力
   - 学会了查阅文档和使用搜索引擎
   - 掌握了调试技巧和错误处理方法

### 6.2. 遇到的问题及解决方案

#### 6.2.1. 公文审批流程的复杂性

**问题**：公文审批流程需要支持多级审批、会签、加签等复杂场景，且流程需要可配置。

**解决方案**：
1. 设计了流程配置表，支持动态配置审批步骤
2. 使用策略模式处理不同的审批操作
3. 引入工作流引擎（Activiti）进行流程管理
4. 实现了流程监控和历史追溯功能

#### 6.2.2. 学籍号的唯一性保证

**问题**：学籍号需要按照国家标准生成，且必须保证唯一性，高并发情况下可能出现重复。

**解决方案**：
1. 使用数据库唯一索引保证学籍号唯一性
2. 采用"学校代码+年级代码+入学年份+序号"的格式
3. 使用分布式ID生成器（雪花算法）作为备选方案
4. 在插入前进行预检查，捕获异常并重试

#### 6.2.3. 批量导入的性能问题

**问题**：批量导入大量学生数据时，响应时间过长，影响用户体验。

**解决方案**：
1. 使用异步处理，导入后立即返回，后台执行
2. 采用批量插入（Batch Insert）优化数据库操作
3. 对数据进行预校验，减少数据库交互次数
4. 实现进度反馈和结果通知机制

#### 6.2.4. 前端表单验证的复杂性

**问题**：复杂的表单验证逻辑（如身份证号格式、日期范围等）难以维护。

**解决方案**：
1. 封装自定义验证规则和工具函数
2. 使用Element Plus的表单验证机制
3. 实现跨字段的联动验证
4. 提供清晰的错误提示信息

### 6.3. 不足与改进方向

#### 6.3.1. 技术层面

1. **代码质量**
   - 部分代码存在重复，需要进一步抽象和封装
   - 异常处理机制不够统一
   - 单元测试覆盖率有待提高

2. **系统性能**
   - 未实现缓存机制，数据库查询频繁
   - 大数据量导出时内存占用较高
   - 未进行数据库查询优化

3. **安全性**
   - 需要加强SQL注入和XSS攻击防护
   - 敏感数据未加密存储
   - 日志审计不够完善

#### 6.3.2. 业务层面

1. **功能完善**
   - 缺少移动端适配
   - 未实现消息推送功能
   - 统计分析功能较为简单

2. **用户体验**
   - 界面交互不够流畅
   - 操作提示不够友好
   - 未实现操作引导

#### 6.3.3. 改进计划

1. **短期改进（1-2个月）**
   - 完善单元测试，覆盖率提升到80%以上
   - 引入Redis缓存，优化查询性能
   - 完善异常处理和日志记录

2. **中期改进（3-6个月）**
   - 引入微服务架构，提高系统可扩展性
   - 实现移动端H5页面
   - 增加大数据分析和可视化功能

3. **长期改进（6个月以上）**
   - 引入工作流引擎（Activiti/Camunda）
   - 实现AI智能审批和推荐
   - 构建教育大数据平台

### 6.4. 心得体会

#### 6.4.1. 理论与实践的结合

在学校学习的理论知识在实际项目中得到了充分应用。比如：
- 数据库课程的范式理论在表设计中发挥了重要作用
- 软件工程课程的开发流程在项目管理中得到实践
- Java编程思想中的设计模式在代码中频繁使用

但同时也发现，实际项目比课堂案例复杂得多，需要考虑性能、安全、可维护性等多个维度。

#### 6.4.2. 持续学习的重要性

技术更新迭代非常快，本次实习中：
- Spring Boot从2.x升级到3.x，需要学习新的特性和配置
- Vue 2到Vue 3的升级带来了Composition API
- Element Plus作为Element UI的升级版本，使用方式有变化

这让我认识到，作为开发者必须保持持续学习的态度。

#### 6.4.3. 沟通协作的价值

在团队开发中，良好的沟通至关重要：
- 需求理解不一致会导致返工
- 接口定义不清晰会影响前后端联调
- 代码规范不统一会增加维护成本

学会倾听、表达和文档化是提升团队效率的关键。

#### 6.4.4. 代码质量的意识

从实习初期的"能跑就行"到后期的"优雅高效"，我逐渐建立了代码质量意识：
- 代码不仅要实现功能，还要易于阅读和维护
- 良好的命名和注释是必要的
- 重构是开发过程中不可或缺的环节

### 6.5. 对未来的展望

#### 6.5.1. 职业规划

本次实习让我明确了未来的发展方向：
1. **短期目标（1-2年）**
   - 深入学习Java后端技术栈
   - 掌握微服务架构和云原生技术
   - 参与大型项目的开发，积累经验

2. **中期目标（3-5年）**
   - 成为技术骨干，能够独立负责模块设计
   - 学习系统架构设计
   - 培养项目管理能力

3. **长期目标（5年以上）**
   - 成为系统架构师或技术负责人
   - 在特定领域（如教育信息化）形成专业优势
   - 参与开源项目，贡献技术价值

#### 6.5.2. 技术发展方向

1. **后端技术**
   - 深入研究Spring Cloud微服务架构
   - 学习容器化技术（Docker、Kubernetes）
   - 掌握分布式系统设计

2. **前端技术**
   - 跟进Vue 3生态的发展
   - 学习TypeScript提高代码质量
   - 了解跨端开发技术

3. **新兴技术**
   - 关注AI在教育领域的应用
   - 学习大数据处理技术
   - 了解区块链在数据安全中的应用

### 6.6. 致谢

感谢学校和指导老师给予我这次宝贵的实习机会。通过这次实习，我不仅提升了技术能力，更重要的是学会了如何在实际工作中解决问题、与团队协作。

特别感谢项目组的同事们，在我遇到困难时给予的指导和帮助。也感谢学校老师的悉心指导，让我能够顺利完成实习任务。

这次实习是我职业生涯的重要起点，我将以此为动力，继续努力学习和成长，为教育信息化事业贡献自己的力量。

---

## 附录

### A. 项目技术栈

**后端**：
- Spring Boot 3.1.0
- MyBatis Plus 3.5.3
- MySQL 8.0
- Redis 7.0
- JWT 0.11.5

**前端**：
- Vue 3.2.0
- Element Plus 2.3.0
- Axios 1.4.0
- Vue Router 4.1.0
- Vuex 4.0.2

**开发工具**：
- IntelliJ IDEA 2023
- VS Code
- Navicat
- Postman
- Git

### B. 核心代码文件清单

**后端**：
- `DocumentController.java` - 公文流转控制器
- `DocumentServiceImpl.java` - 公文业务逻辑
- `StudentController.java` - 学籍管理控制器
- `StudentServiceImpl.java` - 学籍业务逻辑
- `DocumentMapper.java` - 公文数据访问
- `StudentMapper.java` - 学籍数据访问

**前端**：
- `Draft.vue` - 公文起草页面
- `Approval.vue` - 公文审批页面
- `InfoManage.vue` - 学生信息管理
- `Change.vue` - 学籍变动管理
- `api/document.js` - 公文API封装
- `api/student.js` - 学籍API封装

### C. 参考资料

1. 《Spring Boot实战》 - Craig Walls
2. 《Vue.js设计与实现》 - 霍春阳
3. 《MySQL技术内幕》 - 姜承尧
4. 《设计模式：可复用面向对象软件的基础》 - GoF
5. 官方文档：
   - Spring Boot官方文档
   - Vue 3官方文档
   - Element Plus官方文档
   - MyBatis Plus官方文档

---

**字数统计**：约 35,000 字
**完成日期**：2025年1月
**版本**：v1.0
