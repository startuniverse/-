# 测试说明

## 当前状态

✅ **所有数据已成功插入数据库**

```bash
# 学生表：3条记录
# 文档表：3条记录
# 资源表：3条记录
# 资产表：3条记录
```

✅ **代码已编译完成**

## 重新启动应用

由于代码已修改，需要重新启动 Spring Boot 应用：

```bash
# 在 E:\shixun\backend 目录下
mvn spring-boot:run
```

或者如果使用 IDE，重新运行 `EducationPlatformApplication.java`

## 测试步骤

### 1. 学生管理测试

**查询学生列表**
```bash
# 不带参数 - 查询所有学生
GET http://localhost:3000/backend/student/list

# 按班级查询
GET http://localhost:3000/backend/student/list?classId=1

# 按学校查询
GET http://localhost:3000/backend/student/list?schoolId=1
```

**新增学生**
```bash
POST http://localhost:3000/backend/student/add
Content-Type: application/json

{
    "userId": 5,
    "studentNumber": "20221120142",
    "classId": 1,
    "guardianName": "测试家长",
    "guardianPhone": "13800138099"
}
```

### 2. 文档管理测试

**发布文档**
```bash
POST http://localhost:3000/backend/document/publish
Content-Type: application/json

{
    "title": "测试文档",
    "content": "这是测试文档的内容",
    "category": "notice",
    "schoolId": 1
}
```

**查询文档**
```bash
GET http://localhost:3000/backend/document/query
GET http://localhost:3000/backend/document/query?status=2
GET http://localhost:3000/backend/document/query?category=notice
```

### 3. 资源管理测试

**上传资源**
```bash
POST http://localhost:3000/resource/upload
Content-Type: application/json

{
    "title": "测试资源",
    "description": "测试资源描述",
    "category": "lesson",
    "subject": "数学",
    "fileUrl": "/test.pdf",
    "schoolId": 1
}
```

**查询资源**
```bash
GET http://localhost:3000/resource/list
GET http://localhost:3000/resource/list?category=lesson
GET http://localhost:3000/resource/list?subject=数学
```

### 4. 资产管理测试

**新增资产**
```bash
POST http://localhost:3000/backend/asset/add
Content-Type: application/json

{
    "schoolId": 1,
    "assetName": "测试资产",
    "category": "equipment",
    "quantity": 5,
    "unitPrice": 1000.00,
    "location": "测试位置",
    "responsiblePerson": "测试负责人"
}
```

**查询资产**
```bash
GET http://localhost:3000/backend/asset/list
GET http://localhost:3000/backend/asset/list?schoolId=1
GET http://localhost:3000/backend/asset/list?category=equipment
```

## 已修复的问题

| 问题 | 原因 | 修复方案 |
|------|------|----------|
| 学生查询显示"No Data" | 数据库无数据 + 查询逻辑错误 | 添加测试数据 + 修正查询逻辑 |
| 文档发布报"服务器内部错误" | author_id字段为NOT NULL但未设置 | 添加默认值处理 |
| 资源查询显示"no data" | 数据库无数据 | 添加测试数据 |
| 资产查询显示"No Data" | schoolId参数必填但未传 | 改为可选参数 |

## 数据说明

### 学生数据
- 崔宇杭 (20221120139) - 班级1
- 学生2 (20221120140) - 班级1
- 学生3 (20221120141) - 班级2

### 文档数据
- 2025年春季学期教学计划 (学校1, 已发布)
- 关于加强校园安全的通知 (学校2, 已发布)
- 教育局政策文件 (教育局, 已发布)

### 资源数据
- 初中数学教学课件 (学校1, 已发布)
- 小学语文朗读视频 (学校2, 已发布)
- 期中考试试卷 (跨校, 已发布)

### 资产数据
- 台式计算机 (学校1, 10台)
- 办公桌 (学校1, 20张)
- 投影仪 (学校2, 5台)

## 注意事项

1. **重启应用**：代码修改后必须重启应用才能生效
2. **权限检查**：部分接口需要管理员权限，请确保使用有权限的账号登录
3. **跨域问题**：如果前端访问，确保后端已配置CORS
