# 在线学习培训模块 - 部署检查清单

## 📋 部署前检查

### 环境检查
- [ ] Java JDK 8+ 已安装
- [ ] Maven 已安装并配置
- [ ] MySQL 5.7+ 已安装并启动
- [ ] Node.js 16+ 已安装
- [ ] npm 或 yarn 已安装

### 数据库准备
- [ ] 创建数据库 `education_platform`
- [ ] 字符集设置为 `utf8mb4`
- [ ] 用户权限正确
- [ ] 导入schema.sql成功

### 后端配置
- [ ] 修改 `application.yml` 数据库连接
- [ ] 配置服务器端口（默认8080）
- [ ] 检查MyBatis-Plus配置
- [ ] 验证依赖包完整

### 前端配置
- [ ] 修改 `.env` 或 `vite.config.js` API地址
- [ ] 检查跨域配置
- [ ] 验证依赖安装完整

---

## 🔧 部署步骤

### 步骤1：数据库部署
```bash
# 1. 创建数据库
mysql -u root -p -e "CREATE DATABASE IF NOT EXISTS education_platform CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;"

# 2. 导入表结构
mysql -u root -p education_platform < E:\shixun\database\schema.sql

# 3. 验证
mysql -u root -p education_platform -e "SHOW TABLES LIKE 'training_%';"
```

**预期结果：** 显示8张表

---

### 步骤2：后端部署
```bash
# 1. 进入后端目录
cd E:\shixun\backend

# 2. 清理并编译
mvn clean compile

# 3. 运行应用
mvn spring-boot:run

# 4. 验证启动
# 查看日志，应该看到：
# "Started EducationPlatformApplication in X.X seconds"
```

**验证：**
- 访问 `http://localhost:8080` - 应该有响应
- 访问 `http://localhost:8080/training/course/list` - 返回JSON数据

---

### 步骤3：前端部署
```bash
# 1. 进入前端目录
cd E:\shixun\frontend

# 2. 安装依赖（首次）
npm install

# 3. 启动开发服务器
npm run dev

# 4. 验证启动
# 查看输出，应该看到：
# "Local: http://localhost:5173"
```

**验证：**
- 访问 `http://localhost:5173` - 应该显示登录页面
- 登录后能看到"培训课程"菜单

---

## 🧪 功能测试清单

### 管理员功能测试
- [ ] 登录管理员账号
- [ ] 进入"培训管理"页面
- [ ] 查看统计数据（初始为0）
- [ ] 点击"新增课程"
- [ ] 填写完整表单
- [ ] 上传封面图片（可选）
- [ ] 保存并发布
- [ ] 验证列表显示新课程
- [ ] 验证统计数据更新
- [ ] 测试编辑功能
- [ ] 测试发布/下架
- [ ] 测试删除功能

### 学生功能测试
- [ ] 登录学生账号
- [ ] 进入"培训课程"页面
- [ ] 浏览课程列表
- [ ] 使用搜索功能
- [ ] 使用筛选功能
- [ ] 点击课程查看详情
- [ ] 点击"立即报名"
- [ ] 验证报名成功提示
- [ ] 进入"我的培训"页面
- [ ] 查看"我的课程"标签
- [ ] 验证课程状态为"已报名"
- [ ] 点击"考试"按钮
- [ ] 回答所有题目
- [ ] 提交试卷
- [ ] 验证分数显示
- [ ] 查看"我的证书"标签
- [ ] 验证证书显示

### 权限测试
- [ ] 学生访问管理员页面 - 应该失败
- [ ] 未登录访问培训页面 - 应该跳转登录
- [ ] 不同角色菜单显示正确

---

## 🐛 故障排查

### 问题1：数据库连接失败
```
错误：Cannot create PoolableConnectionFactory
解决：
  1. 检查MySQL是否启动：net start mysql
  2. 检查application.yml中的用户名密码
  3. 检查数据库名是否正确
  4. 检查端口是否为3306
```

### 问题2：前端无法连接后端
```
错误：Network Error 或 404
解决：
  1. 检查后端是否启动
  2. 检查前端API配置（request.js）
  3. 检查跨域配置
  4. 检查防火墙端口
```

### 问题3：页面空白或404
```
错误：页面无法加载
解决：
  1. 检查路由配置（router/index.js）
  2. 检查组件文件是否存在
  3. 检查浏览器控制台错误
  4. 清除浏览器缓存
```

### 问题4：权限错误
```
错误：权限不足或403
解决：
  1. 检查用户角色是否正确
  2. 检查localStorage中的userInfo
  3. 检查后端@PreAuthorize注解
```

---

## 📊 性能优化建议

### 数据库优化
```sql
-- 为常用查询字段添加索引
ALTER TABLE training_course ADD INDEX idx_status (status);
ALTER TABLE training_course ADD INDEX idx_category (category);
ALTER TABLE training_enrollment ADD INDEX idx_student (student_id);
```

### 后端优化
- 添加Redis缓存
- 使用连接池
- 优化SQL查询

### 前端优化
- 图片懒加载
- 数据缓存
- 防抖搜索

---

## 🔒 安全检查

- [ ] 修改默认管理员密码
- [ ] 数据库密码加密存储
- [ ] 限制文件上传类型和大小
- [ ] 验证所有用户输入
- [ ] 防止SQL注入
- [ ] 防止XSS攻击
- [ ] 日志记录关键操作

---

## 📝 部署文档

建议创建以下文档：

1. **部署说明.md** - 详细部署步骤
2. **用户手册.md** - 用户使用指南
3. **维护手册.md** - 日常维护说明
4. **API文档.md** - 接口详细说明

---

## ✅ 部署成功标准

### 功能完整性
- [ ] 8张数据表创建成功
- [ ] 12个API接口可用
- [ ] 3个前端页面正常
- [ ] 路由跳转正常
- [ ] 菜单显示正确

### 业务流程
- [ ] 管理员能创建课程
- [ ] 学生能浏览课程
- [ ] 学生能报名课程
- [ ] 学生能参加考试
- [ ] 考试能自动评分
- [ ] 通过后能获得证书

### 数据一致性
- [ ] 报名后课程人数+1
- [ ] 考试后更新分数
- [ ] 通过后更新状态
- [ ] 完成后更新完成数

---

## 🎯 部署后优化

### 立即执行
1. 备份数据库
2. 创建管理员账号
3. 添加测试课程
4. 验证所有功能

### 1周内
1. 收集用户反馈
2. 修复发现的bug
3. 优化性能
4. 完善文档

### 1个月内
1. 添加新功能
2. 优化用户体验
3. 扩展培训内容
4. 培训管理员

---

## 📞 技术支持

遇到问题时：

1. **查看日志**
   - 后端日志：`E:\shixun\backend\logs\`
   - 前端控制台：F12

2. **检查配置**
   - 数据库配置
   - API地址配置
   - 路由配置

3. **参考文档**
   - `在线学习培训模块实现总结.md`
   - `培训模块快速开始.md`

4. **联系支持**
   - 提供错误截图
   - 提供日志内容
   - 描述操作步骤

---

## 🎉 部署完成！

当你完成以上所有检查项，恭喜你！

**你的在线学习培训模块已经成功部署！**

现在你可以：
- ✅ 创建培训课程
- ✅ 组织教师学习
- ✅ 进行在线考试
- ✅ 颁发结业证书
- ✅ 统计培训数据

---

**部署日期：** 2026-01-08
**版本：** 1.0
**状态：** ✅ 待部署
